<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue核心 | web前端开发</title>
    <meta name="description" content="个人博客">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.46bdbf49.css" as="style"><link rel="preload" href="/assets/js/app.549ab972.js" as="script"><link rel="preload" href="/assets/js/2.ecc2fa6f.js" as="script"><link rel="preload" href="/assets/js/28.57829572.js" as="script"><link rel="prefetch" href="/assets/js/10.4ce75836.js"><link rel="prefetch" href="/assets/js/11.4771b230.js"><link rel="prefetch" href="/assets/js/12.f03499bf.js"><link rel="prefetch" href="/assets/js/13.2c65fd33.js"><link rel="prefetch" href="/assets/js/14.a5be85de.js"><link rel="prefetch" href="/assets/js/15.428dd0c3.js"><link rel="prefetch" href="/assets/js/16.4b3bd144.js"><link rel="prefetch" href="/assets/js/17.0dd718db.js"><link rel="prefetch" href="/assets/js/18.0a392d7a.js"><link rel="prefetch" href="/assets/js/19.a3f55a97.js"><link rel="prefetch" href="/assets/js/20.46e8e003.js"><link rel="prefetch" href="/assets/js/21.9a036560.js"><link rel="prefetch" href="/assets/js/22.4ff0af16.js"><link rel="prefetch" href="/assets/js/23.cce2bed4.js"><link rel="prefetch" href="/assets/js/24.12c7b7d3.js"><link rel="prefetch" href="/assets/js/25.644b21f7.js"><link rel="prefetch" href="/assets/js/26.ff2f0716.js"><link rel="prefetch" href="/assets/js/27.02ade99e.js"><link rel="prefetch" href="/assets/js/29.ca9097ef.js"><link rel="prefetch" href="/assets/js/3.49ef6df2.js"><link rel="prefetch" href="/assets/js/30.98cc88b4.js"><link rel="prefetch" href="/assets/js/31.98cff12d.js"><link rel="prefetch" href="/assets/js/32.de6c6cb5.js"><link rel="prefetch" href="/assets/js/4.e43a75b1.js"><link rel="prefetch" href="/assets/js/5.fffb226e.js"><link rel="prefetch" href="/assets/js/6.f0f6a59d.js"><link rel="prefetch" href="/assets/js/7.fd46d82f.js"><link rel="prefetch" href="/assets/js/8.0a7d41ba.js"><link rel="prefetch" href="/assets/js/9.20648608.js">
    <link rel="stylesheet" href="/assets/css/0.styles.46bdbf49.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">web前端开发</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML" class="dropdown-title"><span class="title">HTML</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/html/html5/" class="nav-link">
  HTML5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS" class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/css/css3/" class="nav-link">
  CSS3
</a></li></ul></div></div><div class="nav-item"><a href="/Flex/" class="nav-link">
  Flex
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js基础/" class="nav-link">
  JS基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js高级/" class="nav-link">
  JS高级
</a></li><li class="dropdown-item"><!----> <a href="/js/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/js/正则表达式/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><a href="/jquery/" class="nav-link">
  Jquery
</a></div><div class="nav-item"><a href="/Web API/" class="nav-link">
  Web API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ajax" class="dropdown-title"><span class="title">Ajax</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/ajax/" class="nav-link">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/ajax/axios/" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue基础/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue核心/" class="nav-link">
  vue核心
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react基础/" class="nav-link">
  react基础
</a></li><li class="dropdown-item"><!----> <a href="/react/react核心/" class="nav-link">
  react核心
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/node/Express/" class="nav-link">
  Express
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/ .html" class="nav-link">
  mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/websocket/" class="nav-link">
  webSocket
</a></li><li class="dropdown-item"><!----> <a href="/会话技术/" class="nav-link">
  会话技术
</a></li><li class="dropdown-item"><!----> <a href="/模板引擎/" class="nav-link">
  模板引擎
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jiyaning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML" class="dropdown-title"><span class="title">HTML</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/html/html5/" class="nav-link">
  HTML5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS" class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/css/css3/" class="nav-link">
  CSS3
</a></li></ul></div></div><div class="nav-item"><a href="/Flex/" class="nav-link">
  Flex
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js基础/" class="nav-link">
  JS基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js高级/" class="nav-link">
  JS高级
</a></li><li class="dropdown-item"><!----> <a href="/js/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/js/正则表达式/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><a href="/jquery/" class="nav-link">
  Jquery
</a></div><div class="nav-item"><a href="/Web API/" class="nav-link">
  Web API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ajax" class="dropdown-title"><span class="title">Ajax</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/ajax/" class="nav-link">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/ajax/axios/" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue基础/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue核心/" class="nav-link">
  vue核心
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react基础/" class="nav-link">
  react基础
</a></li><li class="dropdown-item"><!----> <a href="/react/react核心/" class="nav-link">
  react核心
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/node/Express/" class="nav-link">
  Express
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/ .html" class="nav-link">
  mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/websocket/" class="nav-link">
  webSocket
</a></li><li class="dropdown-item"><!----> <a href="/会话技术/" class="nav-link">
  会话技术
</a></li><li class="dropdown-item"><!----> <a href="/模板引擎/" class="nav-link">
  模板引擎
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jiyaning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>vue核心</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_1-计算属性-computed" class="sidebar-link">1.计算属性 computed</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_2-过滤器-filters" class="sidebar-link">2.过滤器 filters</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_2-1私有过滤器" class="sidebar-link">2.1私有过滤器</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_2-2全局过滤器" class="sidebar-link">2.2全局过滤器</a></li></ul></li><li><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_3-axios" class="sidebar-link">3.axios</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_3-1拦截器-interceptors" class="sidebar-link">3.1拦截器-interceptors</a></li></ul></li><li><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_4-组件component" class="sidebar-link">4.组件component</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_4-1组件内部成员" class="sidebar-link">4.1组件内部成员</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_4-2私有组件" class="sidebar-link">4.2私有组件</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_4-3全局组件" class="sidebar-link">4.3全局组件</a></li></ul></li><li><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_5-组件传值" class="sidebar-link">5.组件传值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_5-1父给子传值" class="sidebar-link">5.1父给子传值</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_5-2子给父传值" class="sidebar-link">5.2子给父传值</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_5-3兄弟组件传值" class="sidebar-link">5.3兄弟组件传值</a></li></ul></li><li><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_6-路由router" class="sidebar-link">6.路由router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_6-1-重定向redirect" class="sidebar-link">6.1.重定向redirect</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_6-2-子路由children" class="sidebar-link">6.2.子路由children</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_6-3-路由传参" class="sidebar-link">6.3.路由传参</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_6-4-编程式导航" class="sidebar-link">6.4.编程式导航</a></li><li class="sidebar-sub-header"><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_6-5-路由守卫" class="sidebar-link">6.5.路由守卫</a></li></ul></li><li><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_7-监听器watch" class="sidebar-link">7.监听器watch</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vue/vue%E6%A0%B8%E5%BF%83/#_8-vuecli" class="sidebar-link">8.VueCLI</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue核心"><a href="#vue核心" class="header-anchor">#</a> vue核心</h1> <h2 id="_1-计算属性-computed"><a href="#_1-计算属性-computed" class="header-anchor">#</a> 1.计算属性 computed</h2> <p><code>computed计算属性</code>：</p> <p>Vue本身支持模板中使用<strong>复杂表达式</strong>表现业务数据，但是这会使得模板内容过于杂乱，如果确有需求，可以通过computed计算属性实现，该<strong>computed可以对其他data做复杂合成处理</strong></p> <p><code>语法</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  computed<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 属性名称:function(){}</span>
    <span class="token function">属性名称</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 业务表达式实现，可以通过this操作data成员</span>
      <span class="token keyword">return</span>  返回结果
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>计算属性（普通函数赋值）或（简易成员函数赋值） 都可以，不要使用箭头函数</p></blockquote> <p><code>使用</code>：</p> <p>形式上，如何应用data成员，就如何应用计算属性，与使用data样子一致</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>{{ computed计算属性名称 }}       <span class="token comment">&lt;!--模板中--&gt;</span>
this.computed计算属性名称	       <span class="token comment">&lt;!-- Vue实例内部--&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>应用场景</code>：</p> <p>如果页面需要访问一个数据，这个数据比较复杂，是需要通过<strong>其他data</strong>数据经过复杂逻辑制作出来的，就可以使用“计算属性”</p> <p><code>特点</code>：</p> <ol><li>计算属性关联的data如果发生变化，会重新编译执行，获得并使用对应新结果，即<strong>响应式</strong>(入口)</li> <li>计算属性的返回信息有变化，使用的地方也会重新编译执行，存在出口<strong>响应式</strong></li> <li>计算属性内部可以使用this关键字，与Vue对象等效</li> <li>每个计算属性都需要通过<strong>return</strong>关键字返回处理结果</li></ol> <p><code>computed计算属性与methods方法的区别</code>：</p> <ol><li><p>computed计算属性本身有“<strong>缓存</strong>”，在关联的data没有变化的情况下，后续会使用缓存结果，节省资源</p> <p>methods方法没有缓存，每次访问方法体都需要重新加载执行，耗费资源</p></li> <li><p>methods应用<strong>逻辑较复杂</strong>，例如内部可以嵌入ajax，或互相调用，而computed比较纯粹，只是操作data的</p></li></ol> <blockquote><p>在Vue实例内部创建计算属性与el、data、methods并列位置处</p></blockquote> <h2 id="_2-过滤器-filters"><a href="#_2-过滤器-filters" class="header-anchor">#</a> 2.过滤器 filters</h2> <p><code>过滤器</code>：</p> <p>在项目应用中，同样一份数据信息，表现形式却有千差万别，例如<strong>时间信息</strong>可以是对象、时间戳、格式化等，<strong>字符串</strong>可以是大写的、小写的、首字母大写的等等，如果<strong>提供方</strong>给我们提供的信息是其中一种形式，而我们需要的是<strong>另一种</strong>，在Vue中，可以通过 “<strong>过滤器</strong>” 转换处理。</p> <blockquote><p><strong>过滤器是Vue中实现数据格式转换的一种机制。本质就是函数</strong></p></blockquote> <p>如下时间信息通过 <strong>对象</strong>形式 或 <strong>时间戳</strong>方式显示都不合适，但是变为格式化时间就比较友好</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Thu Mar <span class="token number">21</span> <span class="token number">2019</span> <span class="token number">17</span>:48:17 GMT+0800     <span class="token operator">=</span><span class="token operator">&gt;</span>   <span class="token number">2019</span>-03-21 <span class="token number">17</span>:48:17

<span class="token number">1553161717</span>	     					  <span class="token operator">=</span><span class="token operator">&gt;</span>   <span class="token number">2019</span>-03-21 <span class="token number">17</span>:48:17
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>过滤器关键字：<strong>filter</strong>、<strong>filters</strong></p></blockquote> <h3 id="_2-1私有过滤器"><a href="#_2-1私有过滤器" class="header-anchor">#</a> 2.1私有过滤器</h3> <p><code>私有过滤器声明语法</code>：</p> <p>Vue实例化过程中，与el、data平行的位置声明<code>filters</code>成员并在其中制作过滤器，这个过滤器只能被当前Vue实例使用，称为 &quot;私有过滤器&quot;</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  filters<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 如下方法格式是es6简易设置方式，完整写法： 过滤器名称:function(被处理数据){}</span>
    <span class="token function">过滤器名称</span><span class="token punctuation">(</span><span class="token parameter">被处理的数据</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 对数据进行加工处理</span>
      <span class="token keyword">return</span> 结果
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>使用</code>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span><span class="token punctuation">{</span> 应用数据 <span class="token operator">|</span> 过滤器名称 <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>过滤器被设置到应用数据的尾部，通过 “|竖线” 连接</p></blockquote> <p><code>注意</code>：</p> <ol><li>过滤器只可以用在<strong>两个</strong>地方： <font color="red">插值表达式</font>和 <font color="red">:冒号 属性绑定表达式</font>。</li></ol> <blockquote><ol><li><p>插值表达式：  </p></li> <li><p>v-bind属性绑定中使用： &lt;标签  :属性=“数据 | 过滤器&quot;&gt;</p></li></ol></blockquote> <ol start="2"><li>过滤器不让使用this关键字，或者this关键字不是“Vue实例”</li> <li>过滤器需要return返回数据处理后的结果</li></ol> <p><code>案例应用</code>：</p> <p>给时间信息做格式化处理，利用过滤器实现<strong>对象时间</strong>转换为<strong>格式化时间</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{ item.time | timeFMT }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>过滤器：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注册过滤器【私有的】</span>
filters<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token comment">// timeFMT:function(){}</span>
  <span class="token function">timeFMT</span><span class="token punctuation">(</span><span class="token parameter">origin</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> tm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span>   <span class="token comment">// 根据origin重新实例化一个时间对象</span>
    <span class="token keyword">var</span> yyyy <span class="token operator">=</span> tm<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> mm <span class="token operator">=</span> <span class="token punctuation">(</span>tm<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> dd <span class="token operator">=</span> tm<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> hh <span class="token operator">=</span> tm<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> ii <span class="token operator">=</span> tm<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> ss <span class="token operator">=</span> tm<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>yyyy<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mm<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hh<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ii<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ss<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>设置字符串以指定的位数输出，不够就在字符串前边补位</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 字符串.padStart(位数,补位信息)</span>
<span class="token string">'hello'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>      <span class="token comment">// 000hello</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-2全局过滤器"><a href="#_2-2全局过滤器" class="header-anchor">#</a> 2.2全局过滤器</h3> <p><code>全局过滤器</code>：</p> <p>​	在new Vue()前边，直接给Vue调用filter声明的过滤器称为“全局过滤器”</p> <p>​	全局的意思是过滤器可以供<strong>所有Vue实例</strong>使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>名称<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">被处理的数据</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> xx<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> vm2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>全局和私有取舍</code>：</p> <p>理论上，多个Vue实例都需要使用的过滤器声明为全局的，只是当前Vue实例使用的过滤器声明为私有的</p> <p>实际情况：私有的用的更多</p> <p><code>注意</code>：</p> <ol><li>全局过滤器需要在new Vue()<strong>之前</strong>声明</li> <li>多个过滤器可以被同时使用， ，形成一个信息被多次处理效果</li></ol> <h2 id="_3-axios"><a href="#_3-axios" class="header-anchor">#</a> 3.axios</h2> <p>axios是对<strong>ajax封装</strong>的一个产品，向服务器发送请求，获取数据</p> <p><code>获取</code></p> <p>访问npm官网：<a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>  搜索axios即可</p> <blockquote><p>axios获取3种方式：</p></blockquote> <ol><li>直接下载源文件  (推荐)</li> <li>通过script标签引入，需要上网环境</li> <li>npm  install axios</li></ol> <p><code>使用</code></p> <p>axios可以发送各种请求</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'请求地址'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>params<span class="token operator">:</span><span class="token punctuation">{</span>name<span class="token operator">:</span>value<span class="token punctuation">,</span>name<span class="token operator">:</span>value<span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'请求地址'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token operator">:</span>value<span class="token punctuation">,</span>name<span class="token operator">:</span>value<span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span><span class="token string">'get/post'</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span>请求地址<span class="token punctuation">,</span>
  params<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>     <span class="token comment">// 传递get参数信息</span>
  data<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token comment">// 传递post参数信息</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>注意</code>：</p> <ol><li>get()方法如果传递参数需要额外设置params，post()方法则不用</li> <li>axios调用任何方法返回结果都是Promise对象</li></ol> <p><code>给axios配置公共根地址</code></p> <p>给axios把各个请求都需要使用的相同的根地址做统一配置，使得相同代码只维护一份，提升开发速度</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> 公共根地址
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>把axios配置成为Vue成员</code></p> <p>在Vue的大环境中不要直接使用axios，要把axios配置成为Vue的成员，通过Vue对象调用</p> <p>把axios配置为 Vue构造器<strong>原型继承</strong>的成员，这样 vue实例对象就可以调用了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 原型继承成员名称为 $http ，也可以配置为其他名称</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$http <span class="token operator">=</span> axios


<span class="token comment">// vue实例中使用axios</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>url<span class="token operator">:</span>xx<span class="token punctuation">,</span> method<span class="token operator">:</span>xx<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Vue中所有的内容都通过自身调用，开发、维护比较方便</p> <h3 id="_3-1拦截器-interceptors"><a href="#_3-1拦截器-interceptors" class="header-anchor">#</a> 3.1拦截器-interceptors</h3> <p><code>拦截器</code>：</p> <p>​	拦截器是axios向服务器端发送<strong>请求</strong>和<strong>响应</strong>回来所经历的两道关口</p> <blockquote><p>axios本身有两种拦截器：<a href="">请求拦截</a>、<a href="">响应拦截</a></p></blockquote> <ul><li><p>请求拦截器：</p> <p>axios每次<font color="red">开始</font>请求的时候先执行此处逻辑，在这个地方可以给axios做出发前的配置，也可以做出发前的检查工作，检查ok的情况下就开始向服务器端发请求</p></li> <li><p>响应拦截器：</p> <p>axios<font color="red">完成</font>与服务器端交互回到客户端后就执行此处逻辑，在这个地方可以做一些后续收尾事宜，例如判断axios请求是否成功，或相关数据过滤操作</p></li></ul> <blockquote><p>拦截器关键字：interceptors</p></blockquote> <p><code>请求拦截器</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 请求拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 放置业务逻辑代码</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// axios发生错误的处理</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>响应拦截器</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 响应拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 放置业务逻辑代码</span>
  <span class="token comment">// response是服务器端返回来的数据信息，与Promise获得数据一致</span>
  <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// axios请求服务器端发生错误的处理</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>把以上拦截器代码设置好，那么axios&quot;所有&quot;的请求就都会执行了</p></blockquote> <p><code>拦截器细节</code></p> <p>​	知道config参数 和 Promise.reject(error) 分别代表的意思</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol><li><p>config参数</p> <p>config是一个对象 与  axios.defaults 相当(不等于)</p> <p>config可以给axios配置例如baseURL的信息的</p></li> <li><p>response参数</p> <p>服务器端给返回的具体数据信息，与业务axios接收的数据一致</p></li> <li><p>Promise.reject()</p> <p>Promise.reject(data)  是 <strong>语法糖</strong>的用法，本质与下述一致，即返回一个Promise对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
上下效果一致
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">reject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
上下效果一致
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ol> <h2 id="_4-组件component"><a href="#_4-组件component" class="header-anchor">#</a> 4.组件component</h2> <p><code>组件</code>：</p> <p>​	组件是拥有一定功能许多html标签的集合体，是对html标签的封装</p> <p><code>好处</code>：</p> <p>模板中为了实现一个(例如)分页效果，需要绘制<strong>20</strong>个html标签，如果使用组件，就设置<strong>一个标签</strong>就可以了，明显提升开发效率</p> <p><code>框架</code>：</p> <p>Vue：电脑端、移动端</p> <p>react：电脑端、移动端</p> <p>angular：电脑端、移动端</p> <p><code>组件库</code></p> <p>组件库针对框架、平台都有针对开发</p> <p>很有名的第3方组件库(饿了么element-ui)：Vue电脑端组件库   https://element.eleme.cn/#/zh-CN&gt;</p> <blockquote><p>组件关键字：components、component</p></blockquote> <h3 id="_4-1组件内部成员"><a href="#_4-1组件内部成员" class="header-anchor">#</a> 4.1组件内部成员</h3> <p>可以认为<strong>组件</strong>是一个特殊的<strong>Vue实例</strong>，拥有着与Vue实例大致相同的<strong>成员</strong></p> <p>例如  <strong>data</strong>、<strong>methods</strong>、<strong>filters</strong>、<strong>directives</strong>（自定义组件）、<strong>created</strong>等等成员在组件内部都可以设置</p> <p><code>注意</code>：</p> <p>​	组件data成员 与 Vue实例的 不一样，需要通过 function/return 设置，具体要返回一个{}对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>function声明data</p> <blockquote><p>组件中声明的data成员，值需要是一个function，内部通过return返回{}对象供使用，这个特性必须遵守</p></blockquote> <p><code>组件的data必须是一个function</code>：</p> <p>组件根据业务需要，可以被使用多次，<strong>function会使得每次组件使用的时候都亲自执行并给当前应用分配一个独立的数据对象</strong>，这样多个组件的data数据是独立的，互相没有关联、牵扯，互相不会覆盖</p> <p>​      相反，如果直接通过{}对象 给data赋值，多次使用组件会造成大家的data都是<strong>共享的</strong>，就是一份数据，一个组件修改data后，其他组件都受到影响，这与业务逻辑是相违背的</p> <p><code>组件与Vue实例异同</code>：</p> <ol><li>组件中的 data 必须是一个 <strong>function</strong> 并 return 一个 字面量对象
(Vue 实例的 data 可以是 字面量对象，也可以是 function/return形式，前者推荐使用)</li> <li>组件中直接通过 template 属性来指定组件的html结构
Vue 实例中，一般通过 el 属性来指定渲染的容器，当然也可以使用template</li> <li>组件和Vue实例拥有类似的成员，都有自己的生命周期函数，过滤器，methods、data等成员</li></ol> <h3 id="_4-2私有组件"><a href="#_4-2私有组件" class="header-anchor">#</a> 4.2私有组件</h3> <p><code>声明私有组件语法</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  components<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string">'组件的名称'</span><span class="token operator">:</span> <span class="token punctuation">{</span> 配置对象成员 <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token string">'组件的名称'</span><span class="token operator">:</span> <span class="token punctuation">{</span> 配置对象成员 <span class="token punctuation">}</span><span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>使用组件语法</code>：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>组件名称</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>组件名称</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>组件形式上 就是html标签</p></blockquote> <p><code>案例应用</code>：</p> <p>制作一个分页组件并使用</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>组件应用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 组件的名字被当做html标签使用 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-page</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-page</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      components<span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string">'com-page'</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token comment">// template: 设定当前组件拥有的html标签</span>
          template<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;ul&gt;
              &lt;li&gt;1&lt;/li&gt;
              &lt;li&gt;2&lt;/li&gt;
              &lt;li&gt;3&lt;/li&gt;
            &lt;/ul&gt;
          </span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      el<span class="token operator">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><code>注意</code>：</p> <ol><li>template设置的各个html标签需要有<font color="red">唯一的根元素</font>节点，上例为ul</li> <li>组件名称建议是 xx-yy 的格式</li> <li>template都必须有一个<strong>根元素节点</strong></li></ol> <h3 id="_4-3全局组件"><a href="#_4-3全局组件" class="header-anchor">#</a> 4.3全局组件</h3> <p><code>全局组件语法</code>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Vue.component(名称,{配置对象成员})

new Vue()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>注意</code>：</p> <p>​	1. 全局组件需要在new Vue之前设置</p> <h2 id="_5-组件传值"><a href="#_5-组件传值" class="header-anchor">#</a> 5.组件传值</h2> <h3 id="_5-1父给子传值"><a href="#_5-1父给子传值" class="header-anchor">#</a> 5.1父给子传值</h3> <p>父组件可以 引入、使用子组件，从业务上看，该父组件有可能对子组件有<strong>个性化</strong>需求，为了体现组件的<strong>灵活多变</strong>，可以通过<strong>传值</strong>实现</p> <p><code>语法</code>：</p> <blockquote><p>父组件要在子组件标签上通过<strong>属性值</strong>方式传值</p></blockquote> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>子组件标签</span> <span class="token attr-name">xx</span><span class="token attr-value"><span class="token punctuation">=</span>value</span> <span class="token attr-name">yy</span><span class="token attr-value"><span class="token punctuation">=</span>value</span> <span class="token attr-name">zz</span><span class="token attr-value"><span class="token punctuation">=</span>value</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>子组件标签</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>子组件通过<strong>props</strong>接收属性值并应用值</p></blockquote> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--在模板中应用传递来的数据--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>xx<span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过props接收父传递过来的数据,注意各个名称需要使用单引号圈选</span>
    <span class="token comment">// 具体有两种方式：</span>
    props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'xx'</span><span class="token punctuation">,</span><span class="token string">'yy'</span><span class="token punctuation">,</span><span class="token string">'zz'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span><span class="token punctuation">{</span>
      xx<span class="token operator">:</span><span class="token punctuation">{</span>
        type<span class="token operator">:</span>类型限制
        <span class="token keyword">default</span><span class="token operator">:</span>默认值
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>案例应用</code>：</p> <p>​	父组件多次使用按钮组件，每次要求按钮的文字显示不同颜色，就可以通过传值实现</p> <p>父组件App.vue的代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>App根基组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 给子组件传值：通过“属性值”方式实现修饰子组件button按钮文字的颜色 --&gt;</span>
      <span class="token comment">&lt;!-- 属性值来源：直接声明、组件实例data成员 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-button</span> <span class="token attr-name">yan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-button</span> <span class="token attr-name">yan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>orange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-button</span> <span class="token attr-name">:yan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>co<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 对ComButton子组件到导入、注册、使用</span>
<span class="token keyword">import</span> ComButton <span class="token keyword">from</span> <span class="token string">'@/components/ComButton.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    ComButton
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      co<span class="token operator">:</span> <span class="token string">'gray'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>子组件 components/ComButton.vue代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>yan<span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Button'</span><span class="token punctuation">,</span>
  <span class="token comment">// 对父组件传递过来的数据进行接收</span>
  <span class="token comment">// 两种方式：简单的、复杂的</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'yan'</span><span class="token punctuation">]</span>
  <span class="token comment">// props: {</span>
  <span class="token comment">//   yan: {</span>
  <span class="token comment">//     type: String, // Boolean  Number  Object  Array</span>
  <span class="token comment">//     default: 'pink'</span>
  <span class="token comment">//   }</span>
  <span class="token comment">// }</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="_5-1-1子组件修改父组件传递来的数据"><a href="#_5-1-1子组件修改父组件传递来的数据" class="header-anchor">#</a> 5.1.1子组件修改父组件传递来的数据</h4> <blockquote><p>sync 应用(扩展)</p></blockquote> <p>子组件修改父组件传递来的数据</p> <p>方法1：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>父组件：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-button</span> <span class="token attr-name">:yan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>co<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-button</span><span class="token punctuation">&gt;</span></span>
子组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>yan='yellow'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  
			// 子组件接收的yan可以被修改，但是firebug报错，说明不推荐、不允许
			虽然子组件可以修改信息，但是不推荐
      理性分析是：父组件还可以修改
      两头都修改，没有秩序了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>方法2：最传统的实现子组件修改父组件传递数据的</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>父组件：
// 箭头函数，data就一个参数[data是自定义的]，()是否设置都可以，后边语句需要设置{}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-button</span> <span class="token attr-name">:yan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>co<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@xiugai</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>data=&gt;{co=data}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-button</span><span class="token punctuation">&gt;</span></span>
子组件：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit('xiugai','purple')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>父组件声明事件，子组件调用事件修改co</p> <p>父组件通过事件实现co变化，yan就变化，子组件由于响应式，yan自然发生变化</p></blockquote> <p>方法3：通过update:xxx的方式给子组件声明事件</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>父组件：
// 事件名称为 update:xxx 的格式
// xxx 就是传递给子组件的数据的名称
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-button</span> <span class="token attr-name">:yan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>co<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>yan</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>data=&gt;{co=data}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-button</span><span class="token punctuation">&gt;</span></span>
子组件：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit('update:yan','green')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>方法4：<strong>终极版</strong>，通过.sync优化父组件的相关操作</p> <p>该方法实现 子组件修改父组件传递过来的数据，最终方法</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>父组件：
<span class="token comment">&lt;!-- 通过 【:yan.sync=&quot;co&quot;】 就是对 如下内容--&gt;</span>
<span class="token comment">&lt;!-- 【:yan=&quot;co&quot; @update:yan=&quot;data=&gt;{co=data}&quot;】--&gt;</span>
<span class="token comment">&lt;!-- 的封装--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-button</span> <span class="token attr-name">:yan.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>co<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">:se.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>abc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-button</span><span class="token punctuation">&gt;</span></span>
子组件：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit('update:yan','blue')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>以后我们可以通过.sync设置，子组件可以修改父组件传递过来的具体数据信息</p> <p>update是固定标志</p></blockquote> <p>.sync官网详情： <a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6" target="_blank" rel="noopener noreferrer">https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_5-2子给父传值"><a href="#_5-2子给父传值" class="header-anchor">#</a> 5.2子给父传值</h3> <p>子组件给父组件传递数据</p> <p><code>语法</code>：</p> <ol><li>父组件向子组件通过**@符号定义一个事件**，在本身内部methods中声明事件方法</li> <li>子组件使用this.$emit()调用父组件传递过来的事件，并传递相关的数据</li> <li>父组件通过事件方法参数获得子组件传递过来的数据并使用</li></ol> <p><strong><code>父组件操作</code></strong>：</p> <p>父组件通过**@符号**在子组件上定义一个<font color="red">事件</font>，在父组件内部methods中声明事件方法</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;子组件 @func1=&quot;show&quot;&gt;&lt;/子组件&gt;
...
methods:{
	show(arg1,arg2){xxxx}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>​	func1为事件的名称，给子组件触发使用</p> <p>​	show为该事件的执行函数，在父组件内部的methods中定义好</p> <p>​	在事件中可以通过形参(arg1、arg2)接收子组件传递过来的数据 并做进一步处理</p> <p><strong><code>子组件操作</code></strong>：</p> <p>子组件中，使用<font color="red">this.$emit()</font>调用父组件中的事件方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'func1'</span><span class="token punctuation">,</span> 数据<span class="token punctuation">,</span> 数据<span class="token punctuation">)</span>

<span class="token comment">// this.$emit(事件名称, 传递的数据，数据，数据……)</span>
<span class="token comment">// 使用this.$emit调用父组件给声明的事件</span>
<span class="token comment">// $emit可以使得组件实例“触发”本身的事件执行</span>
<span class="token comment">// ($emit也可以触发鼠标或键盘事件执行)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>第二个参数开始传递实参数据，其可以被父组件methods方法的形参所接受</p> <p>$emit(名称，数据，数据……) 是组件调用自己方法的固定方式，第一个参数是被调用方法的名称，后续参数都是给方法传递的实参信息</p> <p><code>案例应用</code></p> <p>父组件(app.vue)代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>我是父组件app----{{dt}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 使用son子组件 --&gt;</span>
    <span class="token comment">&lt;!-- 通过@符号给子组件声明一个(自定义)事件，receive事件方法在methods中设置 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com-son</span> <span class="token attr-name">@jieshou</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>receive<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>com-son</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入、注册、使用子组件</span>
<span class="token keyword">import</span> ComSon <span class="token keyword">from</span> <span class="token string">'./components/Son.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'com-son'</span><span class="token operator">:</span> ComSon
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      dt<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// msg可以接收到当前事件传递过来的数据</span>
    <span class="token function">receive</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dt <span class="token operator">=</span> msg
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>子组件(components/son.vue)代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      我是子组件son
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>huibao()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>汇报学习情况<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">huibao</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'jieshou'</span><span class="token punctuation">,</span> <span class="token string">'我们学习vue很好'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_5-3兄弟组件传值"><a href="#_5-3兄弟组件传值" class="header-anchor">#</a> 5.3兄弟组件传值</h3> <p>兄弟组件之间彼此没有联系，它们需要通过中间件Vue实例对象bus(快递员)进行数据传递</p> <p>给组件实例(或Vue实例) 声明事件有<strong>两种</strong>方式：</p> <ol><li>直接声明</li> <li>通过$on实现</li></ol> <p>给组件实例声明事件：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>组件</span> <span class="token attr-name">@事件名称</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>事件驱动方法<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>组件</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通过**$on**进行声明：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 组件实例.$on(事件名称，事件驱动方法(形参，形参){})</span>

vm<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">traffic<span class="token punctuation">,</span>city</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我坐着{$traffic}到达</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>city<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">城市</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>注意：组件实例  和 vue实例都可以调用$on</p></blockquote> <p><code>实现步骤</code>：</p> <ol><li><p>定义模块src/bus.js，导入<strong>Vue模块并</strong>导出一个Vue实例对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>在各个兄弟组件中，导入 bus.js 模块</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">'@/bus.js'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>虽然bus.js被各个组件都导入，但是系统中只有一个bus对象</p></blockquote></li> <li><p>在<strong>接收</strong>数据的兄弟组件的 created 生命周期方法里(使得事件及时响应)，</p> <p>使用 bus.$on('事件名称', (接收的数据) =&gt; {}) 定义事件成员方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 定义事件,注意箭头函数应用</span>
  bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>xxx是事件方法的名称</p> <p>data是形参，待接收数据，并且可以定义多个</p> <p>注意：如果$on内部要使用this，通过&quot;<strong>箭头函数</strong>&quot;声明方法</p></blockquote></li> <li><p>在<strong>发送</strong>数据的兄弟组件中，使用 bus.$emit('事件名称', 要发送的数据) 向外发送数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;sendMsg&quot;</span><span class="token operator">&gt;</span>给兄弟说话<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 触发 绑定的 事件，并向外传递参数</span>
      bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token string">'1000元保护费'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>xxx 是接收数据组件给bus声明的方法</p> <p>第二个参数是传递的实参数据</p></blockquote></li></ol> <p><code>说明</code>：</p> <ol><li><p>Vue实例可以调用$on()方法进行事件方法创建</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>实例<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span>名称<span class="token punctuation">,</span><span class="token punctuation">(</span>形参，形参，形参……<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>参数根据需要，可以是一个或多个</p></blockquote></li> <li><p>Vue实例可以调用$emit()方法进行事件方法执行</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>实例<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span>名称<span class="token punctuation">,</span>实参，实参，实参……<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>参数与$on的形参是一一对应的</p></blockquote></li></ol> <p><code>注意</code>：</p> <p>虽然各个兄弟组件针对bus.js都有做引入，系统在运行的时候只有<font color="red">一个bus对象</font>，所以一个组件给bus绑定的事件方法，其他组件可以通过bus调用</p> <p><code>案例应用</code>：</p> <p>src/bus.js代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 快递员（中间组件），负责兄弟组件之间传递数据</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 导出一个Vue对象</span>
<span class="token comment">// 注意：这是一个新的对象，与main.js里边的没有关系</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>First.vue代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>first<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>我是大哥--{{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">'@/bus.js'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'First'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// 接收小弟传递过来的数据</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'receive'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> data
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Second.vue代码：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>second<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>我是小弟<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>back()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>给大哥回话<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">'@/bus.js'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Second'</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">back</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'receive'</span><span class="token punctuation">,</span> <span class="token string">'1000元保护费'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>App.vue代码(引入、注册、使用各个兄弟组件)：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>App根基组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>first</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>first</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>second</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>second</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 对两个兄弟子组件 做 导入、注册、使用</span>
<span class="token keyword">import</span> First <span class="token keyword">from</span> <span class="token string">'@/components/First.vue'</span>
<span class="token keyword">import</span> Second <span class="token keyword">from</span> <span class="token string">'@/components/Second.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    First<span class="token punctuation">,</span>
    Second
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_6-路由router"><a href="#_6-路由router" class="header-anchor">#</a> 6.路由router</h2> <p><code>路由</code>：</p> <p>路由是一个js功能模块，用于解决SPA项目组件切换显示问题的，本身对<strong>组件切换</strong>的各个底层技术有做<strong>封装</strong>，是更成熟组件切换解决方案，使用起来更高级、方便。</p> <p>路由是开发SPA项目必备技能之一</p> <p><code>安装路由</code>:</p> <p>在项目中安装路由有两种方式（两种方式本质完全一样）：</p> <ol><li>vuecli（脚手架）创建项目的时候(勾选Router项目即可，这时会增加一个步骤，选择n即可)</li> <li>单独安装:</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i vue-router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：以上安装依赖包的指令需要在<strong>项目根目录</strong>执行</p> <p><code>路由相关组件</code>：</p> <ol><li><p>router-link  设置#锚点超链接按钮</p></li> <li><p>router-view  设置组件显示占位符</p></li></ol> <p><code>案例应用</code>:</p> <p>​	应用 路由 升级SPA案例的组件切换效果</p> <blockquote><p>在src/main.js中给路由做如下配置：</p></blockquote> <ol><li>import引入 路由模块</li> <li>import引入 各个业务组件</li> <li>Vue.use(路由模块) 注册路由组件</li> <li>创建路由对象，通过path、component设置#锚点 与 组件的联系</li> <li>在Vue实例内部 挂载 router路由对象</li></ol> <p>具体代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>

<span class="token comment">// 1. 引入路由模块</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token comment">// 2. 导入各个业务组件</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./components/Home.vue'</span>
<span class="token keyword">import</span> Movie <span class="token keyword">from</span> <span class="token string">'./components/Movie.vue'</span>
<span class="token keyword">import</span> Music <span class="token keyword">from</span> <span class="token string">'./components/Music.vue'</span>

<span class="token comment">// 3. 注册路由中的相关组件</span>
<span class="token comment">// 路由中有两个组件( &lt;router-link&gt;  &lt;router-view&gt; )被进场使用</span>
<span class="token comment">// A. 单独注册</span>
<span class="token comment">// Vue.component('router-link',XXX)</span>
<span class="token comment">// Vue.component('router-view',XXX)</span>
<span class="token comment">// B. 一并注册，一次性把所有的组件都注册好，更高效</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>    <span class="token comment">// 插件</span>

<span class="token comment">// 4. 创建一个路由对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">// path和component都是固定名称</span>
    <span class="token comment">// {path:路由地址, component:被显示的组件模块}</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span> component<span class="token operator">:</span>Home<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/movie'</span><span class="token punctuation">,</span> component<span class="token operator">:</span>Movie<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/music'</span><span class="token punctuation">,</span> component<span class="token operator">:</span>Music<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 5. 挂载路由对象</span>
  router<span class="token punctuation">,</span> <span class="token comment">// 全写：router:router,简易成员赋值</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><blockquote><p>设置切换按钮和占位符</p></blockquote> <p>​     在App.vue中设置按钮 和 占位符</p> <ol><li>按钮： 通过router-link设置  按钮和#锚点信息</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>会员<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/movie<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>电影<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>占位符：通过 router-view 设置组件显示占位符</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>App.vue具体代码：</p></blockquote> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>App根组件-路由实现spa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/movie<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>电影<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/music<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>音乐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cont<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 设置业务组件显示-路由组件实现代表占位符 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>路由执行过程分析</code>:</p> <ol><li><p>用户点击 页面的 路由链接router-link，点击的一瞬间，就会修改 浏览器 地址栏 中的 #号 锚点地址信息，</p></li> <li><p><code>#</code>锚点变化了 会立即被  路由 监听到   (路由有封装window.onhashchange事件)</p></li> <li><p>之后 路由 会获取变化后的#锚点信息  (路由有封装window.location.hash)</p></li> <li><p>再之后 路由 根据#锚点信息找到对应 的组件 (在main.js中可知)</p></li> <li><p>最后组件是通过路由占位符router-view显示的</p></li></ol> <h3 id="_6-1-重定向redirect"><a href="#_6-1-重定向redirect" class="header-anchor">#</a> 6.1.重定向redirect</h3> <p><code>重定向</code>：</p> <p>一个路由执行时可以跳转到另一个路由去执行,使得一个路由地址A与另一个路由地址B联系起来，执行A的时候会跳转执行B</p> <blockquote><p>关键字：<strong>redirect</strong></p></blockquote> <p><code>语法</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">// {path:'/', redirect:'跳转到的路由地址'}</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span> component<span class="token operator">:</span>Home<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>执行  /根目录路由地址  时，就跳转执行 /home路由地址 ，进而把对应的组件给显示出来了</p> <p><code>注意</code>：</p> <ol><li>不仅 &quot;/&quot; 可以被重定向，其他普通路由地址互相也可以重定向</li> <li>重定向会使得路由再次发生调用请求</li></ol> <p><code>案例应用</code>：</p> <p>​	在没有任何#锚点信息时，就显示首页组件效果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">// {path:'路由地址A', redirect:'路由地址B'}      // A 重定向执行 B</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span> component<span class="token operator">:</span>Home<span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-2-子路由children"><a href="#_6-2-子路由children" class="header-anchor">#</a> 6.2.子路由children</h3> <p><code>子路由</code>：</p> <p>一般项目开发中，App.vue是根基组件(第1级)，内部可以有具体业务组件Home.vue  Movie.vue(第2级)，根据业务需要，业务组件内部还要做内容<strong>分级</strong>显示(第3级)组件</p> <p>第3级组件做应用的时候需要设置路由，并且与第2级组件路由有形成父子关系，故称为  子路由</p> <blockquote><p>通过<strong>children</strong>关键字路由设置子路由</p></blockquote> <p><code>案例应用</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入第三层级业务组件</span>
<span class="token keyword">import</span> Hongkong <span class="token keyword">from</span> <span class="token string">'./components/yinyue/Hongkong.vue'</span>

<span class="token comment">// 3. 注册路由中的相关组件</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span> <span class="token comment">// 插件</span>

<span class="token comment">// 4. 创建一个路由对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 给当前路由 配置子路由，关键字children</span>
      path<span class="token operator">:</span><span class="token string">'/music'</span><span class="token punctuation">,</span> 
      component<span class="token operator">:</span>Music<span class="token punctuation">,</span>
      children<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/music/hongkong'</span><span class="token punctuation">,</span>component<span class="token operator">:</span>Hongkong<span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>注意</code>：</p> <ol><li>要通过 **children **关键字设置子路由</li> <li>第三级组件对应的  切换按钮(router-link) 和 显示占位符(router-view)  需要在第二级组件中设置</li> <li>第二级组件对应的 切换按钮(router-link)  和 显示占位符(router-view)  需要在App.vue组件中设置</li></ol> <p><code>给子路由设置重定向</code>:</p> <p>在main.js中给子路由配置重定向：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token punctuation">{</span>
      path<span class="token operator">:</span><span class="token string">'/music'</span><span class="token punctuation">,</span> 
      redirect<span class="token operator">:</span><span class="token string">'/music/dalu'</span><span class="token punctuation">,</span>      <span class="token comment">// A. 子路由重定向配置  推荐</span>
      component<span class="token operator">:</span>Music<span class="token punctuation">,</span>
      children<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token comment">// {path:'/music', redirect:'/music/dalu'}, // B.子路由重定向配置</span>
        <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/music/hongkong'</span><span class="token punctuation">,</span>component<span class="token operator">:</span>Hongkong<span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/music/taiwan'</span><span class="token punctuation">,</span>component<span class="token operator">:</span>Taiwan<span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/music/dalu'</span><span class="token punctuation">,</span>component<span class="token operator">:</span>Dalu<span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>注意</code>：</p> <ol><li>子路由设置<strong>重定向</strong>有两种方式：父路由中 或 子路由中</li> <li>父级路由的component:Music   成员不能去除</li></ol> <h3 id="_6-3-路由传参"><a href="#_6-3-路由传参" class="header-anchor">#</a> 6.3.路由传参</h3> <p><code>路由传参</code>：</p> <p>项目中有应用场景是这样的：</p> <p>商品列表页面中，每个商品项目都有 详情页面，为了知道哪个商品被展示查看，需要在路由地址中额外设置商品的数字id信息，以便据此查询商品，这个商品id就是“<strong>路由传参</strong>”</p> <p><code>声明路由参数</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/dt/:xx/:yy/:zz'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Detail <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>通过   :xx   的方式声明参数，一个或多个都可以，彼此通过  /斜杠  分隔</p></blockquote> <p><code>接收路由参数</code>：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>标签</span><span class="token punctuation">&gt;</span></span>{{$route.params.xx}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>标签</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>xx
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>模板 和 Vue实例 内部都可以接收</p></blockquote> <p><code>案例应用</code>:</p> <p>​	单击电影列表项目，进入详情页面，并对当前电影项目的id信息传递接收</p> <ol><li><p>创建业务组件 src/components/Movie.vue，展示电影列表</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>电影列表展示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 给router-link设置属性，使得生成其他标签(默认生成a标签) 
          tag=&quot;标签名称&quot; ，变为其他标签，不影响单击效果
          &lt;li data-v-358f1330=&quot;&quot; class=&quot;&quot;&gt; 第一滴血 &lt;/li&gt;
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span>  <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>li<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item in movieList<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span> <span class="token punctuation">'</span>/detail/'+item.id  <span class="token punctuation">&quot;</span></span>   <span class="token punctuation">&gt;</span></span>
          {{item.name}}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      movieList<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">101</span><span class="token punctuation">,</span> name<span class="token operator">:</span><span class="token string">'第一滴血'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">102</span><span class="token punctuation">,</span> name<span class="token operator">:</span><span class="token string">'我不是药神'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">103</span><span class="token punctuation">,</span> name<span class="token operator">:</span><span class="token string">'我不是码神'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></li> <li><p>创建业务组件 src/components/Detail.vue 展示电影详情，同时接收电影参数</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>电影详情展示-----{{$route.params.mid}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// 组件实例内部获得&quot;路由参数&quot;，进而可以通过axios获得指定信息的详情内容</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>mid<span class="token punctuation">)</span> <span class="token comment">// 获得名称为mid的路由参数</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>在main.js中 给 Movie.vue 和 Detail.vue 两个组件创建路由，Detail的路由要设置<strong>参数</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 2. 导入各个业务组件</span>
<span class="token keyword">import</span> Movie <span class="token keyword">from</span> <span class="token string">'./components/Movie.vue'</span>
<span class="token keyword">import</span> Detail <span class="token keyword">from</span> <span class="token string">'./components/Detail.vue'</span>

<span class="token comment">// 3. 注册路由中的相关组件</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span> <span class="token comment">// 插件</span>

<span class="token comment">// 4. 创建一个路由对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span><span class="token string">'/movie'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/movie'</span><span class="token punctuation">,</span> component<span class="token operator">:</span>Movie<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 电影列表路由</span>
    <span class="token comment">// 给当前路由设置参数</span>
    <span class="token comment">// 通过:冒号方式 表达有参数，a/b/c 是参数的名称，可以自定义为其他</span>
    <span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/detail/:mid'</span><span class="token punctuation">,</span> component<span class="token operator">:</span>Detail<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 电影详情路由</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ol> <p><code>注意</code>：</p> <ol><li>路由有参数，那么应用中要<strong>传递</strong>该参数</li> <li>router-link标签默认被编译为超链接a标签，可以设置<strong>tag属性</strong>，使其变为其他标签</li></ol> <h3 id="_6-4-编程式导航"><a href="#_6-4-编程式导航" class="header-anchor">#</a> 6.4.编程式导航</h3> <p><code>导航</code>：</p> <p>​	一个路由被执行一次，就是一次导航</p> <p><code>导航种类</code>：</p> <ol><li><strong>声明式导航</strong>：router-link可以编译生成超链接按钮，单击按钮就切换路由并显示对应的组件，这个过程称为“声明式导航(静态)”</li> <li><strong>编程式导航</strong>：有时由于业务需要，一个路由被切换执行并不方便通过<strong>声明式导航</strong>实现，相反是要通过<strong>程序代码</strong>的方式给实现出来，就是“编程式导航(动态)”</li></ol> <p><code>编程式导航的实现</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>路由对象<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>路由地址<span class="token punctuation">)</span>    <span class="token comment">// 根据路由地址执行导航  最经常使用********</span>
路由对象<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  	      <span class="token comment">// 后退************</span>
路由对象<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// 前进</span>
路由对象<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span>数字整数<span class="token punctuation">)</span>     <span class="token comment">// 根据“整型数字”参数做路由的 前进(大于0)、刷新(等于0)、后退(小于0) 操作</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>路由对象</code>：</p> <ol><li>main.js中，就是<strong>router</strong></li> <li>在组件实例中 就是 <strong>this.$router</strong></li></ol> <p><code>案例应用</code>：</p> <p>​	在电影详情页面通过“编程式导航”实现单击“<strong>返回</strong>”按钮回到列表页面效果</p> <p>src/components/Detail.vue具体实现：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$router.back()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>返回back<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$router.go(-1)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>返回go<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$router.push('/movie')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>返回push<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>电影详情展示-----{{$route.params.mid}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_6-5-路由守卫"><a href="#_6-5-路由守卫" class="header-anchor">#</a> 6.5.路由守卫</h3> <p><code>守卫</code>：</p> <p>​	每个路由在执行的时候都会经历一些&quot;<strong>关口</strong>&quot;，关口可以做决定是否 继续前进 或 执行其他路由 或 停止当前路由执行 ，关口就是守卫。</p> <p><code>作用</code>：</p> <p>​	每个项目都要使用守卫，很多组件页面要求只有处于登录状态的用户才可以访问，判断是否登录就是通过守卫做的。</p> <p><code>部署守卫语法</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* 导航守卫 处理逻辑 */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>router是 new VueRouter() 得到的 路由对象</p></blockquote> <ol><li><p>to:是一个对象，保存着将要访问的路由相关参数，to.path:被访问的路由地址信息</p></li> <li><p>from:是一个对象，保存着离开的那个路由的相关参数，from.path: 从哪来的路由地址</p></li> <li><p>next:是一个回调函数，对后续的执行起着 拦截 或 放行 的作用</p></li></ol> <p>如果没有问题请<font color="red">一定执行next()</font>方法，以进行后续操作，</p> <p>next()方法使用示例：</p> <p>​	next('/login')     执行其他路由，例如登录</p> <p>​	next(false)       停止当前路由执行</p> <p>​	next()               执行后续动作</p> <p><code>注意</code>：</p> <p>​	守卫种类有<a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html" target="_blank" rel="noopener noreferrer"><strong>很多</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，我们要学习使用的是 “<strong>全局前置守卫</strong>” ，特点是所有的路由在执行之前都会经过该守卫</p> <p><code>案例应用</code>:</p> <p>实现<strong>非登录用户</strong>访问后台首页就   <strong>强制</strong>去登录的效果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 路由守卫简单使用【全局前置守卫，所有路由都生效】</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// &quot;非登录&quot;用户禁止访问后台页面，相反可以访问login登录页面</span>
    <span class="token keyword">let</span> tk <span class="token operator">=</span> window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
    <span class="token comment">// &quot;没有token&quot; 并且 还要访问 &quot;home页面[非login登录页面]&quot; 就强制登录</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>tk <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>path<span class="token operator">!==</span><span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// return会停止后续代码执行</span>
        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 放行</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_7-监听器watch"><a href="#_7-监听器watch" class="header-anchor">#</a> 7.监听器watch</h2> <p><code>watch监听器</code>：</p> <p>监听器就是监测机制，可以监测vue中data数据的变化，并做相关处理</p> <blockquote><p>关键字：watch</p></blockquote> <p><code>语法</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>
    user<span class="token operator">:</span><span class="token punctuation">{</span>
      addr<span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">,</span>
watch<span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token comment">// data成员名称:函数(新值，旧值){}</span>
   <span class="token function-variable function">name</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newv<span class="token punctuation">,</span>oldv</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'user.addr'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newv<span class="token punctuation">,</span>oldv</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 对象成员监听</span>
   user<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 深度监听，内部任意成员变化都会感知到</span>
    <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newv<span class="token punctuation">,</span> oldv</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    deep<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>注意</code>：</p> <ol><li>监听器既可以监听<strong>普通成员</strong>、也可以监听<strong>对象成员</strong>，还可以<strong>深度</strong>监听</li> <li>一般this可以调用的<strong>成员属性</strong>都可以监听，例如computed计算属性，但是主要针对data做应用</li> <li>深度监听，使用<strong>handler</strong>+<strong>deep</strong>关键字达成</li></ol> <h2 id="_8-vuecli"><a href="#_8-vuecli" class="header-anchor">#</a> 8.VueCLI</h2> <p><code>VueCLI</code></p> <p>脚手架，其可以把许多项目<strong>通用的依赖包</strong>(vue、webpack、路由、vuex、less编译器等等) 和 <strong>通用的配置</strong>都给做好安装好，使得开发者全部的注意力都集中在业务层面，明显提升开发效率的，真实项目都要使用脚手架开发。</p> <p>依赖包：axios、vue等等都是依赖包，一个依赖包中有许多 模块</p> <p><code>安装vuecli</code>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i -g @vue/cli   // 使用全局方式安装
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>上述依赖包通过全局方式安装，完毕后在系统任何目录都会执行名称为&quot;vue&quot;的一个指令</p> <p>依赖包安装完毕，会形成 在 C:\Users\ssh\AppData\Roaming\npm\node_modules@vue\cli 目录</p> <p>vue --version  查看脚手架版本，现在默认是4.0.5版本(如果是2.9.6就是错误的，需要卸载重新安装)</p> <p>npm un -g @vue/cli  卸载</p></blockquote> <p><code>vuecli创建项目</code>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>vue  create  项目名称<span class="token punctuation">(</span>01-pro<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>注意</code>：</p> <ol><li>vuecli创建新项目时，项目名称必须是一个<strong>新目录</strong>，完毕后会自动生产之，并在其中生成项目需要的文件</li> <li>项目上级各个目录名字最好为<strong>英文</strong> 或 <strong>数字</strong> 或 <strong>中横线</strong> 不要使用 中文的或其他特殊符号定义上级目录名字</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.549ab972.js" defer></script><script src="/assets/js/2.ecc2fa6f.js" defer></script><script src="/assets/js/28.57829572.js" defer></script>
  </body>
</html>
