<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS高级 | web前端开发</title>
    <meta name="description" content="个人博客">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.46bdbf49.css" as="style"><link rel="preload" href="/assets/js/app.549ab972.js" as="script"><link rel="preload" href="/assets/js/2.ecc2fa6f.js" as="script"><link rel="preload" href="/assets/js/18.0a392d7a.js" as="script"><link rel="prefetch" href="/assets/js/10.4ce75836.js"><link rel="prefetch" href="/assets/js/11.4771b230.js"><link rel="prefetch" href="/assets/js/12.f03499bf.js"><link rel="prefetch" href="/assets/js/13.2c65fd33.js"><link rel="prefetch" href="/assets/js/14.a5be85de.js"><link rel="prefetch" href="/assets/js/15.428dd0c3.js"><link rel="prefetch" href="/assets/js/16.4b3bd144.js"><link rel="prefetch" href="/assets/js/17.0dd718db.js"><link rel="prefetch" href="/assets/js/19.a3f55a97.js"><link rel="prefetch" href="/assets/js/20.46e8e003.js"><link rel="prefetch" href="/assets/js/21.9a036560.js"><link rel="prefetch" href="/assets/js/22.4ff0af16.js"><link rel="prefetch" href="/assets/js/23.cce2bed4.js"><link rel="prefetch" href="/assets/js/24.12c7b7d3.js"><link rel="prefetch" href="/assets/js/25.644b21f7.js"><link rel="prefetch" href="/assets/js/26.ff2f0716.js"><link rel="prefetch" href="/assets/js/27.02ade99e.js"><link rel="prefetch" href="/assets/js/28.57829572.js"><link rel="prefetch" href="/assets/js/29.ca9097ef.js"><link rel="prefetch" href="/assets/js/3.49ef6df2.js"><link rel="prefetch" href="/assets/js/30.98cc88b4.js"><link rel="prefetch" href="/assets/js/31.98cff12d.js"><link rel="prefetch" href="/assets/js/32.de6c6cb5.js"><link rel="prefetch" href="/assets/js/4.e43a75b1.js"><link rel="prefetch" href="/assets/js/5.fffb226e.js"><link rel="prefetch" href="/assets/js/6.f0f6a59d.js"><link rel="prefetch" href="/assets/js/7.fd46d82f.js"><link rel="prefetch" href="/assets/js/8.0a7d41ba.js"><link rel="prefetch" href="/assets/js/9.20648608.js">
    <link rel="stylesheet" href="/assets/css/0.styles.46bdbf49.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">web前端开发</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML" class="dropdown-title"><span class="title">HTML</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/html/html5/" class="nav-link">
  HTML5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS" class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/css/css3/" class="nav-link">
  CSS3
</a></li></ul></div></div><div class="nav-item"><a href="/Flex/" class="nav-link">
  Flex
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js基础/" class="nav-link">
  JS基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js高级/" class="nav-link">
  JS高级
</a></li><li class="dropdown-item"><!----> <a href="/js/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/js/正则表达式/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><a href="/jquery/" class="nav-link">
  Jquery
</a></div><div class="nav-item"><a href="/Web API/" class="nav-link">
  Web API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ajax" class="dropdown-title"><span class="title">Ajax</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/ajax/" class="nav-link">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/ajax/axios/" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue基础/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue核心/" class="nav-link">
  vue核心
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react基础/" class="nav-link">
  react基础
</a></li><li class="dropdown-item"><!----> <a href="/react/react核心/" class="nav-link">
  react核心
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/node/Express/" class="nav-link">
  Express
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/ .html" class="nav-link">
  mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/websocket/" class="nav-link">
  webSocket
</a></li><li class="dropdown-item"><!----> <a href="/会话技术/" class="nav-link">
  会话技术
</a></li><li class="dropdown-item"><!----> <a href="/模板引擎/" class="nav-link">
  模板引擎
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jiyaning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML" class="dropdown-title"><span class="title">HTML</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/html/html5/" class="nav-link">
  HTML5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS" class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/css/css3/" class="nav-link">
  CSS3
</a></li></ul></div></div><div class="nav-item"><a href="/Flex/" class="nav-link">
  Flex
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js基础/" class="nav-link">
  JS基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js高级/" class="nav-link">
  JS高级
</a></li><li class="dropdown-item"><!----> <a href="/js/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/js/正则表达式/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><a href="/jquery/" class="nav-link">
  Jquery
</a></div><div class="nav-item"><a href="/Web API/" class="nav-link">
  Web API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ajax" class="dropdown-title"><span class="title">Ajax</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/ajax/" class="nav-link">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/ajax/axios/" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue基础/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue核心/" class="nav-link">
  vue核心
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react基础/" class="nav-link">
  react基础
</a></li><li class="dropdown-item"><!----> <a href="/react/react核心/" class="nav-link">
  react核心
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/node/Express/" class="nav-link">
  Express
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/ .html" class="nav-link">
  mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/websocket/" class="nav-link">
  webSocket
</a></li><li class="dropdown-item"><!----> <a href="/会话技术/" class="nav-link">
  会话技术
</a></li><li class="dropdown-item"><!----> <a href="/模板引擎/" class="nav-link">
  模板引擎
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jiyaning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JS高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_1-两大编程思想" class="sidebar-link">1. 两大编程思想</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_1-1-面向过程" class="sidebar-link">1.1. 面向过程</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_1-2-面向对象" class="sidebar-link">1.2. 面向对象</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_1-3-面向过程与面向对象对比" class="sidebar-link">1.3. 面向过程与面向对象对比</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-es6中的类" class="sidebar-link">2. ES6中的类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-1-es6中的类" class="sidebar-link">2.1. ES6中的类</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-2-创建类" class="sidebar-link">2.2. 创建类</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-3-类的constructor构造函数" class="sidebar-link">2.3. 类的constructor构造函数</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-4-类创建添加方法" class="sidebar-link">2.4. 类创建添加方法</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-5-类的继承extends" class="sidebar-link">2.5. 类的继承extends</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-6-子类使用super关键字访问父类的方法" class="sidebar-link">2.6. 子类使用super关键字访问父类的方法</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-7-三个注意点" class="sidebar-link">2.7. 三个注意点</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_2-8-类里面的this指向" class="sidebar-link">2.8. 类里面的this指向</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_3-对象" class="sidebar-link">3. 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_3-1-创建对象" class="sidebar-link">3.1. 创建对象</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_4-构造函数和原型" class="sidebar-link">4. 构造函数和原型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_4-1-定义构造函数" class="sidebar-link">4.1. 定义构造函数</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_4-2-new的执行过程" class="sidebar-link">4.2. new的执行过程</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_4-3-静态成员和实例成员" class="sidebar-link">4.3.  静态成员和实例成员</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_4-4-构造函数存在小问题" class="sidebar-link">4.4. 构造函数存在小问题</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_4-5-构造函数原型对象prototype" class="sidebar-link">4.5. 构造函数原型对象prototype</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_4-6-对象原型：-proto" class="sidebar-link">4.6. 对象原型：__proto__</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_4-7-constructor构造函数" class="sidebar-link">4.7. constructor构造函数</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_5-原型链" class="sidebar-link">5. 原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_5-1-javascript-的成员查找机制" class="sidebar-link">5.1. JavaScript 的成员查找机制</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_5-2-扩展内置对象" class="sidebar-link">5.2. 扩展内置对象</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_6-继承-组合继承" class="sidebar-link">6. 继承-组合继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_6-1-属性继承" class="sidebar-link">6.1. 属性继承</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_6-2-方法继承" class="sidebar-link">6.2. 方法继承</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_7-类的本质" class="sidebar-link">7. 类的本质</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_8-es5-中新增方法" class="sidebar-link">8. ES5 中新增方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_8-1-foreach-数组遍历" class="sidebar-link">8.1. forEach()-数组遍历</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_8-2-filter-数组筛选（过滤）" class="sidebar-link">8.2. filter()-数组筛选（过滤）</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_8-3-some-数组查找" class="sidebar-link">8.3. some()-数组查找</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_8-4-map-数组映射" class="sidebar-link">8.4. map()-数组映射</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_8-5-every" class="sidebar-link">8.5. every()</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_8-6-trim-删除字符串两侧空白符" class="sidebar-link">8.6. trim()-删除字符串两侧空白符</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_8-7-padstart-字符串补位" class="sidebar-link">8.7. padstart()-字符串补位</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_9-函数的定义和调用" class="sidebar-link">9. 函数的定义和调用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_9-1-函数的定义" class="sidebar-link">9.1. 函数的定义</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_9-2-函数的调用" class="sidebar-link">9.2. 函数的调用</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_9-3-函数内部的this指向" class="sidebar-link">9.3. 函数内部的this指向</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_9-4-改变函数内部-this-指向" class="sidebar-link">9.4. 改变函数内部 this 指向</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_10-严格模式-strict" class="sidebar-link">10. 严格模式-strict</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_10-1-什么是严格模式" class="sidebar-link">10.1. 什么是严格模式</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_10-2-开启严格模式" class="sidebar-link">10.2. 开启严格模式</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_10-3-严格模式中的变化" class="sidebar-link">10.3. 严格模式中的变化</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_11-高阶函数" class="sidebar-link">11. 高阶函数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_12-闭包" class="sidebar-link">12. 闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_12-1-变量作用域" class="sidebar-link">12.1. 变量作用域</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_12-2-什么是闭包" class="sidebar-link">12.2. 什么是闭包</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_12-3-闭包的作用" class="sidebar-link">12.3. 闭包的作用</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_12-4-闭包的案例" class="sidebar-link">12.4. 闭包的案例</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_13-递归" class="sidebar-link">13. 递归</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_13-1-什么是递归" class="sidebar-link">13.1. 什么是递归</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_13-2-利用递归求1-n的阶乘" class="sidebar-link">13.2. 利用递归求1~n的阶乘</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_13-3-利用递归求斐波那契数列" class="sidebar-link">13.3. 利用递归求斐波那契数列</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_13-4-遍历数据" class="sidebar-link">13.4. 遍历数据</a></li></ul></li><li><a href="/js/js%E9%AB%98%E7%BA%A7/#_14-拷贝" class="sidebar-link">14. 拷贝</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_14-1-浅拷贝assign" class="sidebar-link">14.1. 浅拷贝assign()</a></li><li class="sidebar-sub-header"><a href="/js/js%E9%AB%98%E7%BA%A7/#_14-2-深拷贝" class="sidebar-link">14.2. 深拷贝</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js高级"><a href="#js高级" class="header-anchor">#</a> JS高级</h1> <h2 id="_1-两大编程思想"><a href="#_1-两大编程思想" class="header-anchor">#</a> 1. 两大编程思想</h2> <h3 id="_1-1-面向过程"><a href="#_1-1-面向过程" class="header-anchor">#</a> 1.1. 面向过程</h3> <p><strong>面向过程：POP(Process-oriented programming)</strong></p> <ul><li>面向过程就是分析出解决问题所需要的步骤，然后用函数把这些步骤一步一步实现，使用的时候再一个一个的依次调用就可以了。</li> <li>示例：把大象放到冰箱，面向过程的做法：
<ul><li><ol><li>打开冰箱---&gt; 2. 放入大象---&gt; 3. 关上冰箱</li></ol></li></ul></li></ul> <h3 id="_1-2-面向对象"><a href="#_1-2-面向对象" class="header-anchor">#</a> 1.2. 面向对象</h3> <p><strong>面向对象：OOP (Object Oriented Programming)</strong></p> <ul><li><p>面向对象是把事务分解成为一个个对象，然后由对象之间分工与合作。</p></li> <li><p>面向对象三大特性</p></li></ul> <blockquote><p>封装性: 封装就是把抽象出来的数据和对数据的操作封装成一个类. (把对象功能封装成一个函数方法，用时直接调用即可。)</p></blockquote> <blockquote><p>继承性: 对象b可以继承对象a中的属性和方法。可以减少代码冗余 。</p></blockquote> <blockquote><p>多态性: 多个形态，对象之间的各个功能互不影响。</p></blockquote> <h3 id="_1-3-面向过程与面向对象对比"><a href="#_1-3-面向过程与面向对象对比" class="header-anchor">#</a> 1.3. 面向过程与面向对象对比</h3> <table><thead><tr><th></th> <th>面向过程</th> <th>面向对象</th></tr></thead> <tbody><tr><td>优点</td> <td>性能比面向对象高，适合跟硬件联系很紧密的东西，例如单片机就采用的面向过程编程。适用于小项目。</td> <td>易维护、易复用、易扩展，由于面向对象有封装、继承、多态性的特性，可以设计出低耦合的系统，使系统更加灵活、更加易于维护。适用于多人合作大项目。</td></tr> <tr><td>缺点</td> <td>不易维护、不易复用、不易扩展</td> <td>性能比面向过程低</td></tr></tbody></table> <blockquote><p>简单程序用面向过程，复杂程序用面向对象.</p></blockquote> <h2 id="_2-es6中的类"><a href="#_2-es6中的类" class="header-anchor">#</a> 2. ES6中的类</h2> <blockquote><p>类抽象了对象的公共部分，它泛指某一大类（class）,抽取，把对象的属性和行为封装成一个类</p></blockquote> <blockquote><p>对象特指某一个，通过类实例化一个具体的对象,类中的具体的某个实例(属性和方法的集合体)</p></blockquote> <p><strong>面向对象的思维特点:</strong></p> <p>​	 1.抽取（抽象）对象共用的属性和方法组织(封装)成一个类(模板)</p> <p>​	 2.对类进行实例化, 获取类的对象</p> <h3 id="_2-1-es6中的类"><a href="#_2-1-es6中的类" class="header-anchor">#</a> 2.1. ES6中的类</h3> <ul><li><p>在ES6中新增加了类的概念，可以使用class关键字声明一个类，之后以这个类来实例化对象。</p></li> <li><p>【构造函数实例化对象】</p></li></ul> <h3 id="_2-2-创建类"><a href="#_2-2-创建类" class="header-anchor">#</a> 2.2. 创建类</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 语法：class 类名 {属性和方法}【构造函数语法糖】</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 注意类名首字母大写</span>
<span class="token comment">// 类要抽取公共属性方法，定义一个类</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 创建类class，创建一个明星类</span>
<span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token comment">// 类的共有属性放到 constructor 里面</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. 利用类创建对象 new实例化对象</span>
<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 类就是构造函数的语法糖</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-3-类的constructor构造函数"><a href="#_2-3-类的constructor构造函数" class="header-anchor">#</a> 2.3. 类的constructor构造函数</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 属性：放到constructor，构造函数里面</span>
<span class="token comment">// 注意：类里面的方法不带function，直接写既可</span>
<span class="token comment">// 类里面要有属性方法，属性方法要是想放到类里面，用constructor构造器</span>
<span class="token comment">// 构造函数作用：接收参数，返回实例对象，new的时候主动执行，主要放一些公共的属性</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>constructor() 方法是类的构造函数(默认方法)，用于传递参数,返回实例对象，通过new命令生成对象实例时，自动调用该方法。</p> <p>注意：每个类里面一定有构造函数，如果没有显示定义, 类内部会自动创建一个constructor() ，</p> <p>注意：this代表当前实例化对象，谁new就代表谁</p></blockquote> <h3 id="_2-4-类创建添加方法"><a href="#_2-4-类创建添加方法" class="header-anchor">#</a> 2.4. 类创建添加方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">sing</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">tiao</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>           

<span class="token comment">// 注意:方法和方法之间不能加逗号</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> 类名 <span class="token punctuation">{</span> 
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>   
    <span class="token function">方法名</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> 
<span class="token punctuation">}</span>              

<span class="token comment">// 注意：类中定义属性，调用方法都得用this</span>
<span class="token comment">// this.属性    this.方法()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>注意：方法之间不能加逗号分隔，同时方法不需要添加function 关键字</li></ul> <blockquote><p>总结：类有对象的公共属性和方法，用class创建，class里面包含constructor和方法，把公共属性放到constructor里面，把公共方法直接往后写既可，但是注意不要加逗号。</p></blockquote> <h3 id="_2-5-类的继承extends"><a href="#_2-5-类的继承extends" class="header-anchor">#</a> 2.5. 类的继承extends</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 父类</span>
<span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 子类继承父类</span>
<span class="token keyword">class</span>  <span class="token class-name">Son</span>  <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span> 
<span class="token punctuation">}</span>     
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">surname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>surname<span class="token operator">=</span> surname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你的姓是'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>surname<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>      

<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>  <span class="token comment">// 子类继承了父类的属性和方法</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> damao<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'刘'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
damao<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//结果为 你的姓是刘</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2-6-子类使用super关键字访问父类的方法"><a href="#_2-6-子类使用super关键字访问父类的方法" class="header-anchor">#</a> 2.6. 子类使用super关键字访问父类的方法</h3> <p>开发过程中会遇到父类子类都有的属性，此时，没必要再写一次，可以直接调用父类的方法就可以了</p> <ul><li>super关键字用于访问和调用对象父类上的函数。</li> <li>可以调用父类的构造函数，也可以调用父类的普通函数。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 当子类没有constructor的时候，可以随意用父类的。</span>
<span class="token comment">// 但是如果子类也含有constructor的话，constructor会返回实例，this的指向不同，</span>
<span class="token comment">// 不可以再直接使用父类的东西，可以使用(super)来调用父类的方法（普通方法，构造方法）。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><strong>调用父类构造函数</strong></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义父类</span>
<span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 子元素继承父类</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用super调用了父类中的构造函数</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
son<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 结果为3    </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p><strong>调用父类普通函数</strong></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义父类</span>
<span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">qian</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'一个亿'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>   

<span class="token comment">// 子元素继承父类</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
    <span class="token comment">// 再写自己的构造函数</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">// 实例对象：子类的实例对象</span>
     <span class="token comment">// 如果子类有自己的构造函数，同时还想继承父类的构造函数,要用super</span>
     <span class="token comment">// 子类在构造函数中使用super, 必须放到this 前面</span>
     <span class="token comment">// (必须先调用父类的构造方法,再使用子类构造方法)</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>uname<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">qian</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// super：调用父类的方法</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">qian</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2毛钱'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>        

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'儿子'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">qian</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       

<span class="token comment">// 注意：如果子类也有相同的方法，优先指向子类，就近原则</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><ul><li>总结：super调用父类的属性和方法，查找方法的原则是(就近原则)</li></ul> <p>属性和方法：</p> <blockquote><p>属性：如果子类既想有自己的属性，又想继承父类的属性，那么用super【super(参数，参数)】。</p></blockquote> <blockquote><p>方法：如果子类和父类有相同的方法，假如子类依旧想用父类的方法，那么用super调用【super.方法()】。</p></blockquote> <blockquote><p>如果子类不写东西，那么直接继承父类就可以用 。</p></blockquote> <blockquote><p>如果子类有自己的构造函数和父类同名的方法，此时不可以直接用父类的东西，需要用super调用父类的方法和构造函数。</p></blockquote> <p><strong>注意:</strong></p> <ol><li>继承中,如果实例化子类输出一个方法,先看子类有没有这个方法,如果有就先执行子类的</li> <li>继承中,如果子类里面没有,就去查找父类有没有这个方法,如果有,就执行父类的这个方法(就近原则)</li> <li>如果子类想要继承父类的方法,同时在自己内部扩展自己的方法,利用super调用父类的构造函数,super 必须在子类this之前调用</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 父类有加法方法</span>
 <span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

 <span class="token comment">// 子类继承父类加法方法 同时 扩展减法方法</span>
 <span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 利用super 调用父类的构造函数 super 必须在子类this之前调用,放到this之后会报错</span>
   <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
son<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
son<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_2-7-三个注意点"><a href="#_2-7-三个注意点" class="header-anchor">#</a> 2.7. 三个注意点</h3> <ol><li>在ES6中，类没有变量提升，所以必须先定义类，才能通过类实例化对象。</li> <li>类里面的共有属性和方法，一定要加this使用.【this，对象调用属性和方法】。</li> <li>类里面的this指向问题：
<ul><li>constructor 里面的this指向实例对象。</li> <li>方法里面的this指向这个方法的调用者。</li></ul></li></ol> <h3 id="_2-8-类里面的this指向"><a href="#_2-8-类里面的this指向" class="header-anchor">#</a> 2.8. 类里面的this指向</h3> <ul><li>构造函数的this指向实例对象。</li> <li>普通函数的this是调用者，谁调用this是谁。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;点击1&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;btn1&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;点击2&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;btn2&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
        <span class="token keyword">class</span> <span class="token class-name">Btn</span> <span class="token punctuation">{</span>
            <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 点击按钮调用cli</span>
                <span class="token comment">// 添加：点击调用方法，注意不要给这个方法加括号,加括号会直接执行方法</span>
                <span class="token comment">// this.id ,this.cli;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cli<span class="token punctuation">;</span>
                <span class="token comment">// console.log(this);</span>
            <span class="token punctuation">}</span>
            <span class="token function">cli</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// console.log('这是一个方法');</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Btn</span><span class="token punctuation">(</span><span class="token string">'#btn1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token function">cli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_3-对象"><a href="#_3-对象" class="header-anchor">#</a> 3. 对象</h2> <ol><li>对象是由属性和方法组成的：是一个无序键值对的集合,指的是一个具体的事物。</li> <li>对象：类中的具体的某个实例【属性和方法的集合体】</li></ol> <ul><li>属性：事物的特征，在对象中用属性来表示（常用名词）。</li> <li>方法：事物的行为，在对象中用方法来表示（常用动词）。</li></ul> <h3 id="_3-1-创建对象"><a href="#_3-1-创建对象" class="header-anchor">#</a> 3.1. 创建对象</h3> <ul><li>在ES5中创建对象可以通过以下三种方式：</li></ul> <blockquote><p>1.对象字面量创建对象</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 属性和方法</span>
    <span class="token comment">// 键值对</span>
    <span class="token comment">// 对象：成员</span>
    uname <span class="token operator">:</span> <span class="token string">'阿飞'</span><span class="token punctuation">,</span>
    age <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    sex <span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fei</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 访问属性和方法</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> obj<span class="token punctuation">.</span>uname <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> obj<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">fei</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 遍历对象</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> key <span class="token keyword">in</span> obj <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 遍历对象的时候，千万不要用对象.属性</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><p>2.new Object()【构造函数】</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// instanceof  -----------------判断是不是属于什么数据类型</span>
<span class="token comment">// arr instanceof Array     </span>
<span class="token comment">// console.log(obj instanceof Object);</span>
<span class="token comment">// 添加属性</span>
obj<span class="token punctuation">.</span>uname <span class="token operator">=</span> <span class="token string">'张三丰'</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">;</span> 
obj<span class="token punctuation">.</span><span class="token function-variable function">taiji</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'太极'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>3.自定义构造函数</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 属性</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>

    <span class="token comment">// 方法</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'说话'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'阿飞'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>uname<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
n<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_4-构造函数和原型"><a href="#_4-构造函数和原型" class="header-anchor">#</a> 4. 构造函数和原型</h2> <ul><li><p>在典型的面向对象(OOP)的语言中（如Java），都存在类的概念，类就是对象的模板，对象就是类的实例，但在ES6之前，JS 中并没用引入类的概念。</p></li> <li><p>ES6，全称ECMAScript6.0 ，2015.06 发布。但是目前浏览器的JavaScript 是ES5 版本，大多数高版本的浏览器也支持ES6，不过只实现了ES6 的部分特性和功能。</p></li> <li><p>在ES6之前，对象不是基于类创建的，而是用一种称为构造函数的特殊函数来定义对象和它们的特征。</p></li></ul> <h3 id="_4-1-定义构造函数"><a href="#_4-1-定义构造函数" class="header-anchor">#</a> 4.1. 定义构造函数</h3> <ul><li>构造函数是一种特殊的函数，主要用来初始化对象，即为对象成员变量赋初始值，它总与new一起使用。</li> <li>可以把对象中一些公共的属性和方法抽取出来，然后封装到这个函数里面。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>在JS 中，使用构造函数时要注意以下两点：</strong></p> <ol><li>构造函数用于创建某一类对象，其首字母要大写。</li> <li>构造函数要和new 一起使用才有意义。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Fn</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token string">'阿飞'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-2-new的执行过程"><a href="#_4-2-new的执行过程" class="header-anchor">#</a> 4.2. new的执行过程</h3> <p><strong>new在执行时会做四件事情：</strong></p> <ol><li>在内存中创建一个新的空对象。</li> <li>让this指向这个新的对象。</li> <li>执行构造函数里面的代码，给这个新对象添加属性和方法。</li> <li>返回这个新对象（所以构造函数里面不需要return）。</li></ol> <h3 id="_4-3-静态成员和实例成员"><a href="#_4-3-静态成员和实例成员" class="header-anchor">#</a> 4.3.  静态成员和实例成员</h3> <ul><li><p>静态成员：在构造函数本身上添加的成员称为静态成员，只能由构造函数本身来访问。</p></li> <li><p>实例成员：在构造函数内部this上创建的对象成员称为实例成员，只能由实例化的对象来访问。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实例成员</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 静态成员</span>
Person<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// console.log( ldh.sex );      ----&gt;undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> Person<span class="token punctuation">.</span>sex <span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 静态成员只能由构造函数访问</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> ldh<span class="token punctuation">.</span>uname <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 实例成员只能由实例对象访问</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_4-4-构造函数存在小问题"><a href="#_4-4-构造函数存在小问题" class="header-anchor">#</a> 4.4. 构造函数存在小问题</h3> <blockquote><p>当实例化对象的时候，属性好理解，属性名属性值，那么方法是函数，函数是复杂数据类型</p> <p>那么保存的时候是保存地址，又指向函数，而每创建一个对象，都会有一个函数，</p> <p>每个函数都得开辟一个内存空间，此时浪费内存了。如果多次实例化，会浪费内存。</p> <p>那么如何节省内存呢，我们需要用到原型方法放到构造函数里面。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Star</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'在唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> zxc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'周星驰'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><img src="https://jiyaning.github.io/staticImgs/images/内存.jpg"> <h3 id="_4-5-构造函数原型对象prototype"><a href="#_4-5-构造函数原型对象prototype" class="header-anchor">#</a> 4.5. 构造函数原型对象prototype</h3> <ul><li>原型对象：就是一个属性，是构造函数的属性，这个属性是一个对象，也称呼prototype 为原型对象。</li> <li>每一个构造函数都有一个属性，prototype
<ul><li>作用：是为了共享方法，从而达到节省内存</li> <li>构造函数通过原型分配的函数是所有对象所共享的。</li></ul></li></ul> <blockquote><p>JavaScript 规定，每一个构造函数都有一个prototype 属性，指向另一个对象(通过调用构造函数而创建的实例的原型)。</p> <p>这个prototype 就是一个对象，对象的所有属性和方法，都会被构造函数所拥有。</p> <p>把公共的方法，直接定义在prototype 对象上，这样所有对象的实例就可以共享这些方法。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Star</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token comment">// this.sing = function () {</span>
    <span class="token comment">//  console.log(this.name + '在唱歌');</span>
    <span class="token comment">// }</span>
<span class="token punctuation">}</span>

<span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">+</span> <span class="token string">'在唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> zxc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'周星驰'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// console.log( Star.prototype );</span>
ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
zxc<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><p><strong>总结：所有的公共属性写到构造函数里面，所有的公共方法写到原型对象prototype里面</strong></p></blockquote> <p>疑问：为何创建一个实例对象，都可以自动的跑到原型对象上找方法？</p> <p>因为每一个实例对象都有一个属性<code>__proto__</code>，对象原型，指向原型对象。</p> <h3 id="_4-6-对象原型：-proto"><a href="#_4-6-对象原型：-proto" class="header-anchor">#</a> 4.6. 对象原型：<code>__proto__</code></h3> <ul><li>对象原型：是实例对象的一个属性，每一个对象一个属性，指向原型对象。</li> <li>主要作用：是为了指向原型对象（prototype）。</li></ul> <blockquote><p>每个实例化对象都会有一个属性<code>__proto__</code>指向构造函数的prototype 原型对象。</p> <p>之所以对象可以使用构造函数prototype 原型对象的属性和方法，就是因为对象有<code>__proto__</code> 原型的存在。</p></blockquote> <ul><li><code>__proto__</code>原型是一个非标准属性，不可以拿来赋值或者设置，（只读属性）。</li></ul> <blockquote><p>1.<code>__proto__</code>对象原型和原型对象prototype 是等价的。</p></blockquote> <blockquote><p>2.<code>__proto__</code>对象原型的意义在于为对象的查找机制提供一个方向，或者说一条路线，但是它是一个非标准属性，因此实际开发中，不可以使用这个属性，它只是内部指向原型对象prototype。</p></blockquote> <img src="https://jiyaning.github.io/staticImgs/images/关系图.jpg"> <p><strong>总结：每一个对象都有一个原型，作用是指向原型对象prototype</strong>。</p> <p><strong>统一称呼：<code>__proto__</code>为原型，prototype为原型对象</strong>。</p> <h3 id="_4-7-constructor构造函数"><a href="#_4-7-constructor构造函数" class="header-anchor">#</a> 4.7. constructor构造函数</h3> <ul><li><strong>记录是哪个构造函数创建出来的</strong>。</li> <li>constructor是一个属性：原型对象的一个属性。</li> <li>作用：指回构造函数本身。</li></ul> <ol><li>原型（<code>__proto__</code>）和构造函数（prototype）原型对象，里面都有一个属性constructor，称为构造函数，因为它指回构造函数本身。</li> <li>constructor 主要用于记录该对象引用于哪个构造函数，它可以让原型对象重新指向原来的构造函数。</li> <li>一般情况下，对象的方法都在构造函数的原型对象中设置。如果有多个对象的方法，可以给原型对象采取对象形式赋值，但是这样就会覆盖构造函数原型对象原来的内容，这样修改后的原型对象constructor  就不再指向当前构造函数了。此时，可以在修改后的原型对象中，添加一个constructor 指向原来的构造函数。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 给原型对象传入对象添加方法</span>
<span class="token class-name">Star</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">sing</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">dance</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 此时会覆盖原先prototype中的内容，传入一个新的对象，那么此时就不知道构造函数是哪个了</span>
<span class="token comment">// 所以我们要指回构造函数：constructor：构造函数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Star</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 原型对象：方法</span>
<span class="token comment">// Star.prototype.chang = function () {</span>
<span class="token comment">// 	console.log('唱歌');</span>
<span class="token comment">// }</span>
<span class="token comment">// Star.prototype.tiao = function () {</span>
<span class="token comment">// 	console.log('跳舞');</span>
<span class="token comment">// }</span>

<span class="token class-name">Star</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor <span class="token operator">:</span> Star<span class="token punctuation">,</span>
    <span class="token function-variable function">chang</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">tiao</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">rap</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 实例对象</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'阿飞'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>总结：constructor  主要作用是可以指回原来的构造函数本身</strong>。</p> <blockquote><p>构造函数、对象实例、原型对象三者之间的关系</p></blockquote> <img src="https://jiyaning.github.io/staticImgs/images/构造函数，原型对象，对象实例关系.jpg"> <h2 id="_5-原型链"><a href="#_5-原型链" class="header-anchor">#</a> 5. 原型链</h2> <ul><li>原型链：由原型<code>__proto__</code>所串起来的一个链式。</li> <li>作用：提供一个成员的查找机制，或者查找规则（查找方向）。</li></ul> <img src="https://jiyaning.github.io/staticImgs/images/原型链.jpg"> <h3 id="_5-1-javascript-的成员查找机制"><a href="#_5-1-javascript-的成员查找机制" class="header-anchor">#</a> 5.1. JavaScript 的成员查找机制</h3> <ol><li>当访问一个对象的属性（方法）时，首先查找这个对象自身有没有该属性（方法）。</li> <li>如果没有就查找它的原型（也就是<code>__proto__</code>指向的prototype 原型对象）。</li> <li>如果还没有就查找原型对象的原型（Object的原型对象）。</li> <li>依此类推一直找到Object 为止（null）。</li></ol> <blockquote><p>__proto__对象原型的意义就在于为对象成员查找机制提供一个方向，或者说一条路线。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-2-扩展内置对象"><a href="#_5-2-扩展内置对象" class="header-anchor">#</a> 5.2. 扩展内置对象</h3> <ul><li>可以通过原型对象prototype ，对原来的内置对象进行扩展自定义的方法。
<ul><li>比如给数组增加自定义求和的功能:</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加求和方法</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> newArr<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_6-继承-组合继承"><a href="#_6-继承-组合继承" class="header-anchor">#</a> 6. 继承-组合继承</h2> <ul><li>ES6之前并没有提供extends继承。可以通过<code>构造函数+原型对象</code>模拟实现继承，被称为组合继承。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
调用这个函数<span class="token punctuation">,</span> 并且修改函数运行时的<span class="token keyword">this</span> 指向

<span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// call把父类的this指向子类</span>
<span class="token comment">// thisArg ：当前调用函数this 的指向对象</span>
<span class="token comment">// arg1，arg2：传递的其他参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-1-属性继承"><a href="#_6-1-属性继承" class="header-anchor">#</a> 6.1. 属性继承</h3> <ul><li><p>组合继承：利用构造函数和原型对象实现子类的继承。</p></li> <li><p>实现方法：把父类的this指向子类的this既可，调用父类函数，用call改变this指向。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Father</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this指向父类的实例对象</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token comment">// 只要把父类的this指向子类的this既可</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age<span class="token punctuation">,</span>score</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this指向子类构造函数</span>
    <span class="token comment">// this.uname = uname;</span>
    <span class="token comment">// this.age = age;</span>
    <span class="token comment">// Father(uname,age);</span>
    <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>uname<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">+</span> <span class="token string">'唱歌'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>uname<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_6-2-方法继承"><a href="#_6-2-方法继承" class="header-anchor">#</a> 6.2. 方法继承</h3> <ul><li>实现方法:把父类的实例对象赋值给子类的原型对象，用contructor指回子类构造函数本身。</li></ul> <blockquote><p>一般情况下，对象的方法都在构造函数的原型对象中设置，通过构造函数无法继承父类方法。</p> <p>核心原理：将子类所共享的方法提取出来，让子类的prototype 原型对象= new 父类()  。</p> <p>本质：子类原型对象等于是实例化父类，因为父类实例化之后另外开辟空间，就不会影响原来父类原型对象。</p> <p>将子类的constructor 指回子类构造函数本身。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Father</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">chang</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token comment">// Son.prototype = Father.prototype;通过构造函数无法继承父类方法。</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">chang</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">score</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'考试'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// obj.score();</span>
<span class="token comment">// console.log(Son.prototype);</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>注意：一定要让Son指回构造函数</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 实现继承后，让Son指回原构造函数</span>

<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Son<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>总结：用构造函数实现属性继承，用原型对象实现方法继承</strong>。</p> <h2 id="_7-类的本质"><a href="#_7-类的本质" class="header-anchor">#</a> 7. 类的本质</h2> <ul><li>ES6类class的本质还是function。</li> <li>类的所有方法都定义在类的prototype属性上。</li> <li>类创建的实例,里面也有<code>__proto__</code>原型，指向类的prototype原型对象。</li> <li>所以ES6的类的绝大部分功能，ES5都可以做到。</li> <li>新的class写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已。</li> <li>所以ES6的类其实就是语法糖。</li></ul> <blockquote><p>语法糖：就是一种便捷写法，简单理解 。
有两种方法可以实现同样的功能, 但是一种写法更加清晰、方便,那么这个方法就是语法糖。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> Star <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_8-es5-中新增方法"><a href="#_8-es5-中新增方法" class="header-anchor">#</a> 8. ES5 中新增方法</h2> <ul><li>ES5 中新增了一些方法，可以很方便的操作数组或者字符串：
<ul><li>数组方法:  迭代(遍历)方法:   forEach()     filter()       some()    map()    every()</li> <li>字符串方法:  trim()</li></ul></li></ul> <h3 id="_8-1-foreach-数组遍历"><a href="#_8-1-foreach-数组遍历" class="header-anchor">#</a> 8.1. forEach()-数组遍历</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// value：数组当前项的值</span>
<span class="token comment">// index：数组当前项的索引（下标）</span>
<span class="token comment">// arr：数组对象本身</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">,</span><span class="token string">'yellow'</span><span class="token punctuation">,</span><span class="token string">'orange'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elm<span class="token punctuation">,</span>i<span class="token punctuation">,</span>arrAbc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span>i<span class="token punctuation">,</span>arrAbc<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_8-2-filter-数组筛选（过滤）"><a href="#_8-2-filter-数组筛选（过滤）" class="header-anchor">#</a> 8.2. filter()-数组筛选（过滤）</h3> <ul><li>filter() 方法创建一个新的数组，新数组中的元素是通过筛选指定数组中符合条件的所有元素 。
<ul><li>主要用于筛选数组。</li> <li>注意它直接返回一个新数组。</li> <li>filter() 不会对空数组进行筛选。</li> <li>filter() 不会改变原始数组。</li> <li>如果没有符合条件的元素则返回空数组。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 数组中的每个元素都会执行这个函数</span>
<span class="token comment">// value: 数组当前项的值</span>
<span class="token comment">// index：数组当前项的索引</span>
<span class="token comment">// arr：当前元素属于的数组对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token number">333</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> reArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elm<span class="token punctuation">,</span> a<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(elm,a, n);</span>
    <span class="token keyword">return</span> elm <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_8-3-some-数组查找"><a href="#_8-3-some-数组查找" class="header-anchor">#</a> 8.3. <strong>some()</strong>-数组查找</h3> <ul><li>some() 方法用于检测数组中的元素是否满足指定条件. 通俗点查找数组中是否有满足条件的元素。</li> <li>注意它返回值是布尔值, 如果查找到这个元素, 就返回true , 如果查找不到就返回false。</li> <li>如果找到第一个满足条件的元素,则终止循环. 不在继续查找。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>array<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// value: 数组当前项的值</span>
<span class="token comment">// index：数组当前项的索引</span>
<span class="token comment">// arr：数组对象本身</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> re <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elm<span class="token punctuation">,</span>i<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(elm,i,arr);</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> elm <span class="token operator">&gt;=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_8-4-map-数组映射"><a href="#_8-4-map-数组映射" class="header-anchor">#</a> 8.4. map()-数组映射</h3> <ul><li>map() 方法返回一个新数组，数组中的元素为原始数组元素调用函数处理后的值。</li> <li>map() 方法按照原始数组元素顺序依次处理元素。基本用法跟forEach()方法类似</li> <li>注意：
<ul><li>map() 不会对空数组进行检测。</li> <li>map() 不会改变原始数组。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> newArray<span class="token operator">=</span>array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// value：数组当前项的值</span>
<span class="token comment">// index：数组当前项的索引（下标）</span>
<span class="token comment">// arr：数组对象本身</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 数值项求平方</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> arrayOfSquares <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">*</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>arrayOfSquares<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, 4, 9, 16</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_8-5-every"><a href="#_8-5-every" class="header-anchor">#</a> 8.5. every()</h3> <ul><li>every() 方法用于检测数组所有元素是否都符合指定条件（通过函数提供）。</li> <li>every() 方法使用指定函数检测数组中的所有元素：
<ul><li>如果数组中检测到有一个元素不满足，则整个表达式返回 <em>false</em> ，且剩余的元素不会再进行检测。</li> <li>如果所有元素都满足条件，则返回 true。</li></ul></li> <li>注意：
<ul><li>every() 不会对空数组进行检测。</li> <li>every() 不会改变原始数组。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> res <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// value：数组当前项的值</span>
<span class="token comment">// index：数组当前项的索引（下标）</span>
<span class="token comment">// arr：数组对象本身</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> 
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'item='</span> <span class="token operator">+</span> item <span class="token operator">+</span> <span class="token string">',index='</span><span class="token operator">+</span>index<span class="token operator">+</span><span class="token string">',array='</span><span class="token operator">+</span>array <span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_8-6-trim-删除字符串两侧空白符"><a href="#_8-6-trim-删除字符串两侧空白符" class="header-anchor">#</a> 8.6. trim()-删除字符串两侧空白符</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'   hello   '</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>）  <span class="token comment">// hello   删除字符串两侧的空白符</span>
<span class="token keyword">var</span> str1 <span class="token operator">=</span> <span class="token string">'   he l l o   '</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>）  <span class="token comment">// he l l o  删除字符串两侧的空白符</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_8-7-padstart-字符串补位"><a href="#_8-7-padstart-字符串补位" class="header-anchor">#</a> 8.7. padstart()-字符串补位</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> newStr <span class="token operator">=</span> oldStr<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span>len<span class="token punctuation">,</span> str<span class="token punctuation">)</span>

<span class="token comment">// 根据给定长度自动在字符串的前面补充想补充的字符串（只返回修改后的字符串，不修改原字符串）</span>
<span class="token comment">// oldStr 要补充的字符串</span>
<span class="token comment">// len 给定的长度，转换后</span>
<span class="token comment">// str 想补充的字符串</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'7'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a1 <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>   <span class="token comment">// 7</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span>  <span class="token comment">// 07</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><code>padEnd()</code>和padStart()参数用法一样，只是把想加的字符串加到后头。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>insertAdjacentHTML   将指定的文本解析为<span class="token constant">HTML</span>或<span class="token constant">XML</span>，并将结果节点插入到<span class="token constant">DOM</span>树中的指定位置

element<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>

position是相对于元素的位置，并且必须是以下字符串之一：
beforebegin<span class="token operator">:</span>   元素自身的前面。
afterbegin<span class="token operator">:</span>    插入元素内部的第一个子节点之前。
beforeend<span class="token operator">:</span>     插入元素内部的最后一个子节点之后。
afterend<span class="token operator">:</span>      元素自身的后面。

text是要被解析为<span class="token constant">HTML</span>或<span class="token constant">XML</span><span class="token punctuation">,</span>并插入到<span class="token constant">DOM</span>树中的字符串。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_9-函数的定义和调用"><a href="#_9-函数的定义和调用" class="header-anchor">#</a> 9. 函数的定义和调用</h2> <h3 id="_9-1-函数的定义"><a href="#_9-1-函数的定义" class="header-anchor">#</a> 9.1. 函数的定义</h3> <blockquote><p>1.函数声明方式 function 关键字 (命名函数)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>2.函数表达式(匿名函数、自调用函数)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 匿名函数</span>
<span class="token keyword">var</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'哇哈哈'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 自调用函数</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'内容'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token string">'bbb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>3.创建对象 new Function()</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'console.log(a + b)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'参数1'</span><span class="token punctuation">,</span><span class="token string">'参数2'</span><span class="token operator">...</span><span class="token punctuation">,</span> <span class="token string">'函数体'</span><span class="token punctuation">)</span>

<span class="token comment">// 注意:</span>
<span class="token comment">// Function 里面参数都必须是字符串格式</span>
<span class="token comment">// 第三种方式执行效率低，也不方便书写，因此较少使用</span>
<span class="token comment">// 所有函数都是 Function 的实例(对象)  </span>
<span class="token comment">// 函数也属于对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_9-2-函数的调用"><a href="#_9-2-函数的调用" class="header-anchor">#</a> 9.2. 函数的调用</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 普通函数</span>
<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 对象的方法</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">taiji</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">taiji</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 绑定事件函数</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 定时器函数</span>
window<span class="token punctuation">.</span><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 自调用函数（立即执行函数）</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_9-3-函数内部的this指向"><a href="#_9-3-函数内部的this指向" class="header-anchor">#</a> 9.3. 函数内部的this指向</h3> <blockquote><p>这些 this 的指向，是当我们调用函数的时候确定的。调用方式的不同决定了this 的指向不同。</p></blockquote> <blockquote><p>一般指向我们的调用者:</p></blockquote> <table><thead><tr><th>调用方式</th> <th>this指向</th></tr></thead> <tbody><tr><td>普通函数调用</td> <td>window</td></tr> <tr><td>构造函数调用</td> <td>实例对象，原型对象prototype里面的方法也指向实例对象</td></tr> <tr><td>对象方法调用</td> <td>该方法所属对象</td></tr> <tr><td>事件绑定方法</td> <td>绑定事件对象</td></tr> <tr><td>定时器函数</td> <td>window</td></tr> <tr><td>立即执行函数</td> <td>window</td></tr></tbody></table> <h3 id="_9-4-改变函数内部-this-指向"><a href="#_9-4-改变函数内部-this-指向" class="header-anchor">#</a> 9.4. 改变函数内部 this 指向</h3> <blockquote><p>JavaScript 专门提供了一些函数方法来更优雅的处理函数内部this的指向问题：</p> <p>常用的有call()、apply()、bind() 三种方法。</p></blockquote> <h4 id="_9-4-1-call-方法"><a href="#_9-4-1-call-方法" class="header-anchor">#</a> 9.4.1.  call()方法</h4> <ul><li>call()方法调用一个对象。简单理解为调用函数的方式，但是它可以改变函数的 this 指向。</li> <li>应用场景:  经常做继承.</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>

<span class="token comment">// thisArg：在fun 函数运行时指定的this 值</span>
<span class="token comment">// arg1，arg2：传递的其他参数</span>

<span class="token comment">// 返回值就是函数的返回值，因为它就是调用函数</span>

<span class="token keyword">function</span> <span class="token function">Father</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
   <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>

<span class="token comment">// 因此当想改变this 指向，同时想调用这个函数的时候，可以使用call，比如继承</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>name <span class="token operator">:</span> <span class="token string">'阿飞'</span><span class="token punctuation">,</span> age <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">:</span> <span class="token string">'阿飞'</span><span class="token punctuation">,</span>
    age <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fei</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> objN <span class="token operator">=</span> <span class="token punctuation">{</span>name <span class="token operator">:</span> <span class="token string">'带土'</span><span class="token punctuation">,</span>age <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span><span class="token function">fei</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> obj<span class="token punctuation">.</span>fei <span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">fei</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>objN<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_9-4-2-apply-方法"><a href="#_9-4-2-apply-方法" class="header-anchor">#</a> 9.4.2. apply()方法</h4> <ul><li><p>apply() 方法调用一个函数。简单理解为调用函数的方式，但是它可以改变函数的 this 指向。</p></li> <li><p>应用场景:  经常跟数组有关系</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token punctuation">[</span>argsArray<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>调用函数

<span class="token comment">// thisArg：在fun函数运行时指定的this值</span>
<span class="token comment">// argsArray：传递的值，必须包含在数组里面</span>

<span class="token comment">// 返回值就是函数的返回值，因为它就是调用函数</span>
<span class="token comment">// 因此apply 主要跟数组有关系，比如使用Math.max() 求数组的最大值</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> n <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'andy'</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                 <span class="token comment">//此时的this指向的是window a+b运行结果为NaN</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//此时的this指向的是对象obj,参数使用数组传递,运行结果为3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_9-4-3-bind-方法"><a href="#_9-4-3-bind-方法" class="header-anchor">#</a> 9.4.3. bind()方法</h4> <ul><li><p>bind() 方法不会调用函数,但是能改变函数内部this 指向,返回的是原函数改变this之后产生的新函数</p></li> <li><p>如果只是想改变 this 指向，并且不想调用这个函数的时候，可以使用bind</p></li> <li><p>应用场景:不调用函数,但是还想改变this指向</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'andy'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//此处的f是bind返回的新函数</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用新函数  this指向的是对象obj 参数使用逗号隔开</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_9-4-4-call、apply、bind三者的异同"><a href="#_9-4-4-call、apply、bind三者的异同" class="header-anchor">#</a> 9.4.4. call、apply、bind三者的异同</h4> <ul><li>共同点 : 都可以改变this指向</li> <li>不同点:
<ul><li>call 和 apply  会调用函数, 并且改变函数内部this指向.</li> <li>call 和 apply传递的参数不一样,call传递参数使用逗号隔开,apply使用数组传递</li> <li>bind  不会调用函数, 可以改变函数内部this指向.</li></ul></li> <li>应用场景
<ol><li>call 经常做继承.</li> <li>apply 经常跟数组有关系.  比如借助于数学对象实现数组最大值最小值</li> <li>bind 不调用函数,但是还想改变this指向. 比如改变定时器内部的this指向.</li></ol></li></ul> <h2 id="_10-严格模式-strict"><a href="#_10-严格模式-strict" class="header-anchor">#</a> 10. 严格模式-strict</h2> <h3 id="_10-1-什么是严格模式"><a href="#_10-1-什么是严格模式" class="header-anchor">#</a> 10.1. 什么是严格模式</h3> <blockquote><p>JavaScript 除了提供正常模式外，还提供了严格模式（strict mode）。</p> <p>ES5 的严格模式是采用具有限制性 JavaScript变体的一种方式，即在严格的条件下运行 JS 代码。</p> <p>严格模式在 IE10 以上版本的浏览器中才会被支持，旧版本浏览器中会被忽略。</p></blockquote> <ul><li>严格模式对正常的 JavaScript 语义做了一些更改：
<ul><li>1.消除了 Javascript 语法的一些不合理、不严谨之处，减少了一些怪异行为。</li> <li>2.消除代码运行的一些不安全之处，保证代码运行的安全。</li> <li>3.提高编译器效率，增加运行速度。</li> <li>4.禁用了在 ECMAScript 的未来版本中可能会定义的一些语法，为未来新版本的 Javascript 做好铺垫。比如一些保留字如：class,enum,export, extends, import, super 不能做变量名</li></ul></li></ul> <h3 id="_10-2-开启严格模式"><a href="#_10-2-开启严格模式" class="header-anchor">#</a> 10.2. 开启严格模式</h3> <p>严格模式可以应用到整个脚本或个别函数中。因此在使用时，可以将严格模式分为为脚本开启严格模式和为函数开启严格模式两种情况。</p> <p><code>为脚本开启严格模式</code></p> <ul><li><p>有的 script 脚本是严格模式，有的 script 脚本是正常模式，这样不利于文件合并，所以可以将整个脚本文件放在一个立即执行的匿名函数之中。这样独立创建一个作用域而不影响其他script 脚本文件。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//在当前的这个自调用函数中有开启严格模式，当前函数之外还是普通模式</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//或者 </span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span> <span class="token comment">//当前script标签开启了严格模式</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">//当前script标签未开启严格模式</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul> <p><code>为函数开启严格模式</code></p> <ul><li><p>要给某个函数开启严格模式，需要把“use strict”;  (或 'use strict'; ) 声明放在函数体所有语句之前。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
　　<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
　　<span class="token keyword">return</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">//当前fn函数开启了严格模式</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h3 id="_10-3-严格模式中的变化"><a href="#_10-3-严格模式中的变化" class="header-anchor">#</a> 10.3. 严格模式中的变化</h3> <p>严格模式对 Javascript 的语法和行为，都做了一些改变。</p> <blockquote><p>变量规定: 变量申明必须加var，而且不准删除变量</p></blockquote> <p>在正常模式中，如果一个变量没有声明就赋值，默认是全局变量。</p> <p>严格模式禁止这种用法，变量都必须先用var命令声明，然后再使用。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'use strict'</span>

 num <span class="token operator">=</span> <span class="token number">10</span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token comment">//严格模式后使用未声明的变量--Uncaught ReferenceError: n is not defined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>严禁删除已经声明变量。例如，delete x; 语法是错误的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> num2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> num2<span class="token punctuation">;</span>  <span class="token comment">//严格模式不允许删除变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>严格模式下this 指向问题</p></blockquote> <ul><li>正常模式中全局作用域函数中的this 指向window 对象。</li> <li>严格模式下全局作用域中函数中的this是undefined。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//严格模式下全局作用域中函数中的this指向是 undefined</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>以前构造函数时不加new也可以调用,当普通函数，this 指向全局对象。</li> <li>严格模式下,如果构造函数不加new调用, this 指向的是undefined ，如果给this赋值则会报错。</li> <li>new 实例化的构造函数指向创建的对象实例。</li> <li>定时器this 还是指向window 。</li> <li>事件、对象还是指向调用者。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Star();严格模式下,如果构造函数不加new调用,</span>
<span class="token comment">// this 指向的是undefined 如果给this赋值则会报错.</span>

<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 定时器 this 还是指向 window</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>函数变化:参数不能重名</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// var a = 2;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 正常模式中,结果是3</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 严格模式 Uncaught SyntaxError: </span>
           <span class="token comment">// Duplicate parameter name not allowed in this context</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>函数必须声明在顶层</p></blockquote> <ul><li>新版本的JavaScript 会引入“块级作用域”（ES6 中已引入）。为了与新版本接轨，不允许在非函数的代码块内声明函数。</li></ul> <p>更多严格模式要求参考：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode</p> <h2 id="_11-高阶函数"><a href="#_11-高阶函数" class="header-anchor">#</a> 11. 高阶函数</h2> <blockquote><p>高阶函数是对其他函数进行操作的函数，它接收函数作为参数或将函数作为返回值输出。</p></blockquote> <blockquote><p>把函数作为参数，或者把函数作为返回值的的函数，称为高阶函数。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 把函数当做参数的函数，称为高阶函数，</span>
<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                  <span class="token comment">// 此时fn就是一个高阶函数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    n <span class="token operator">&amp;&amp;</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">num</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'哇哈哈'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//把函数当做返回值的函数，也叫高阶函数</span>
<span class="token keyword">function</span> <span class="token function">fun</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token function-variable function">n</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'内容'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">re</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>函数也是一种数据类型，同样可以作为参数，传递给另外一个参数使用。最典型的就是作为回调函数。</p> <p>同理，函数也可以作为返回值传递回来。</p></blockquote> <h2 id="_12-闭包"><a href="#_12-闭包" class="header-anchor">#</a> 12. 闭包</h2> <h3 id="_12-1-变量作用域"><a href="#_12-1-变量作用域" class="header-anchor">#</a> 12.1. 变量作用域</h3> <p>变量根据作用域的不同分为两种：全局变量和局部变量。</p> <ol><li>函数内部可以使用全局变量。</li> <li>函数外部不可以使用局部变量。</li> <li>当函数执行完毕，本作用域内的局部变量会销毁。</li></ol> <h3 id="_12-2-什么是闭包"><a href="#_12-2-什么是闭包" class="header-anchor">#</a> 12.2. 什么是闭包</h3> <blockquote><p>闭包（closure）指有权访问另一个函数作用域中变量的函数。</p></blockquote> <blockquote><p>简单理解就是 ，一个作用域可以访问另外一个函数内部的局部变量。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
   <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment">// fn1就是闭包函数</span>
   	<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span>
  	    <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 10</span>
       <span class="token punctuation">}</span>
       <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_12-3-闭包的作用"><a href="#_12-3-闭包的作用" class="header-anchor">#</a> 12.3. 闭包的作用</h3> <blockquote><p>作用：延伸变量的作用范围。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
   <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
    <span class="token keyword">return</span> fun<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_12-4-闭包的案例"><a href="#_12-4-闭包的案例" class="header-anchor">#</a> 12.4. 闭包的案例</h3> <ol><li>利用闭包的方式得到当前li 的索引号</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 以前：</span>
<span class="token keyword">var</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>index <span class="token operator">=</span> i<span class="token punctuation">;</span>     <span class="token comment">//设置自定义属性保存i</span>
    lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.dir(this);     dir，打印所有属性和方法</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 闭包：</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 利用for循环创建了4个立即执行函数</span>
    <span class="token comment">// 立即执行函数也成为小闭包,因为立即执行函数里面的任何一个函数都可以使用它的i变量</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lis<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="2"><li>闭包应用-3秒钟之后,打印所有li元素的内容</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getNameFunc</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 不是闭包</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>　　
<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>　　　　
    name<span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getNameFunc</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> that<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_13-递归"><a href="#_13-递归" class="header-anchor">#</a> 13. 递归</h2> <h3 id="_13-1-什么是递归"><a href="#_13-1-什么是递归" class="header-anchor">#</a> 13.1. 什么是递归</h3> <blockquote><p>**递归：**如果一个函数在内部可以调用其本身，那么这个函数就是递归函数。</p> <p>简单理解:函数内部自己调用自己, 这个函数就是递归函数。</p></blockquote> <blockquote><p>**注意：**递归函数的作用和循环效果一样，由于递归很容易发生“栈溢出”错误（stack overflow），</p> <p>所以必须要加退出条件return。</p></blockquote> <h3 id="_13-2-利用递归求1-n的阶乘"><a href="#_13-2-利用递归求1-n的阶乘" class="header-anchor">#</a> 13.2. 利用递归求1~n的阶乘</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//利用递归函数求1~n的阶乘 1 * 2 * 3 * 4 * ..n</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//结束条件</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">fn</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -----6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_13-3-利用递归求斐波那契数列"><a href="#_13-3-利用递归求斐波那契数列" class="header-anchor">#</a> 13.3. 利用递归求斐波那契数列</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 利用递归函数求斐波那契数列(兔子序列)  1、1、2、3、5、8、13、21...</span>
<span class="token comment">// 用户输入一个数字 n 就可以求出 这个数字对应的兔子序列值</span>
<span class="token comment">// 只需要知道用户输入的n 的前面两项(n-1 n-2)就可以计算出n 对应的序列值</span>
<span class="token keyword">function</span> <span class="token function">fb</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">fb</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fb</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fb</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_13-4-遍历数据"><a href="#_13-4-遍历数据" class="header-anchor">#</a> 13.4. 遍历数据</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span> 
        <span class="token punctuation">{</span>
            id <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            name <span class="token operator">:</span> <span class="token string">'家电'</span><span class="token punctuation">,</span>
            goods <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    id <span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
                    name <span class="token operator">:</span> <span class="token string">'冰箱'</span><span class="token punctuation">,</span>
                    goods <span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token punctuation">{</span>
                            id <span class="token operator">:</span> <span class="token number">111</span><span class="token punctuation">,</span>
                            name <span class="token operator">:</span> <span class="token string">'海尔'</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                            id <span class="token operator">:</span> <span class="token number">112</span><span class="token punctuation">,</span>
                            name <span class="token operator">:</span> <span class="token string">'美的'</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                    id <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
                    name <span class="token operator">:</span> <span class="token string">'洗衣机 '</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            id <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            name <span class="token operator">:</span> <span class="token string">'服饰'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// var data = [{},{}];</span>
<span class="token comment">// 写一个函数，根据给出得到id去能够获取指定的数据</span>
<span class="token comment">// 获取数据</span>
<span class="token keyword">function</span> <span class="token function">getId</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 定义一个变量</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历</span>
    arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            obj <span class="token operator">=</span> val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>goods <span class="token operator">&amp;&amp;</span> val<span class="token punctuation">.</span>goods<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            obj <span class="token operator">=</span> <span class="token function">getId</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span>goods<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">getId</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h2 id="_14-拷贝"><a href="#_14-拷贝" class="header-anchor">#</a> 14. 拷贝</h2> <ul><li>拷贝不能直接赋值，对象赋值的是地址</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//对象是复杂数据类型，直接赋值，赋值的是地址</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">:</span> <span class="token string">'张三丰'</span><span class="token punctuation">,</span>
    age <span class="token operator">:</span> <span class="token number">22</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newObj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span><span class="token string">&quot;李寻欢&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>李寻欢
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_14-1-浅拷贝assign"><a href="#_14-1-浅拷贝assign" class="header-anchor">#</a> 14.1. 浅拷贝assign()</h3> <blockquote><p>浅拷贝: 只拷贝对象最外面一层</p></blockquote> <blockquote><p>es6：新方法</p> <p>Object.assign(target, sources);</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        name <span class="token operator">:</span> <span class="token string">'张三丰'</span><span class="token punctuation">,</span>
        age <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
        color <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">,</span><span class="token string">'yellow'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        message <span class="token operator">:</span> <span class="token punctuation">{</span>sex <span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span>score <span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 遍历</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> obj <span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token comment">// obj有什么,newObj就有什么</span>
<span class="token comment">// newObj.name = obj.name;</span>
<span class="token comment">// newObj.age = obj.age;</span>

<span class="token comment">//es6：新方法assign()</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>newObj<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'李寻欢'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>张三丰
obj<span class="token punctuation">.</span>message<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>message<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>女
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_14-2-深拷贝"><a href="#_14-2-深拷贝" class="header-anchor">#</a> 14.2. 深拷贝</h3> <blockquote><p>数据对象里面的所有层次都拷贝</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        name <span class="token operator">:</span> <span class="token string">'张三丰'</span><span class="token punctuation">,</span>
        age <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
        color <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">,</span><span class="token string">'yellow'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        message <span class="token operator">:</span> <span class="token punctuation">{</span>sex <span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span>score <span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 封装</span>
<span class="token keyword">function</span> <span class="token function">kaobei</span> <span class="token punctuation">(</span><span class="token parameter">newObj<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 要把obj拷贝给newObj</span>
    <span class="token comment">// 发现，obj[key]可能是数组，还能是对象，具有复杂数据</span>
    <span class="token comment">// 那么此时直接拷贝，又会变成复杂数据类型传递</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> obj <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// newObj[key] = obj[key];</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// obj[key]是数组，就再遍历</span>
            <span class="token comment">// newObj[key] = obj[key]</span>
            newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">kaobei</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// obj[key]是对象，就再遍历</span>
            <span class="token comment">// newObj[key] = obj[key]</span>
            newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token function">kaobei</span><span class="token punctuation">(</span>newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">kaobei</span><span class="token punctuation">(</span>newObj<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'aaa'</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>message<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>张三丰
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">.</span>message<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>男
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.549ab972.js" defer></script><script src="/assets/js/2.ecc2fa6f.js" defer></script><script src="/assets/js/18.0a392d7a.js" defer></script>
  </body>
</html>
