<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ajax | web前端开发</title>
    <meta name="description" content="个人博客">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.46bdbf49.css" as="style"><link rel="preload" href="/assets/js/app.549ab972.js" as="script"><link rel="preload" href="/assets/js/2.ecc2fa6f.js" as="script"><link rel="preload" href="/assets/js/9.20648608.js" as="script"><link rel="prefetch" href="/assets/js/10.4ce75836.js"><link rel="prefetch" href="/assets/js/11.4771b230.js"><link rel="prefetch" href="/assets/js/12.f03499bf.js"><link rel="prefetch" href="/assets/js/13.2c65fd33.js"><link rel="prefetch" href="/assets/js/14.a5be85de.js"><link rel="prefetch" href="/assets/js/15.428dd0c3.js"><link rel="prefetch" href="/assets/js/16.4b3bd144.js"><link rel="prefetch" href="/assets/js/17.0dd718db.js"><link rel="prefetch" href="/assets/js/18.0a392d7a.js"><link rel="prefetch" href="/assets/js/19.a3f55a97.js"><link rel="prefetch" href="/assets/js/20.46e8e003.js"><link rel="prefetch" href="/assets/js/21.9a036560.js"><link rel="prefetch" href="/assets/js/22.4ff0af16.js"><link rel="prefetch" href="/assets/js/23.cce2bed4.js"><link rel="prefetch" href="/assets/js/24.12c7b7d3.js"><link rel="prefetch" href="/assets/js/25.644b21f7.js"><link rel="prefetch" href="/assets/js/26.ff2f0716.js"><link rel="prefetch" href="/assets/js/27.02ade99e.js"><link rel="prefetch" href="/assets/js/28.57829572.js"><link rel="prefetch" href="/assets/js/29.ca9097ef.js"><link rel="prefetch" href="/assets/js/3.49ef6df2.js"><link rel="prefetch" href="/assets/js/30.98cc88b4.js"><link rel="prefetch" href="/assets/js/31.98cff12d.js"><link rel="prefetch" href="/assets/js/32.de6c6cb5.js"><link rel="prefetch" href="/assets/js/4.e43a75b1.js"><link rel="prefetch" href="/assets/js/5.fffb226e.js"><link rel="prefetch" href="/assets/js/6.f0f6a59d.js"><link rel="prefetch" href="/assets/js/7.fd46d82f.js"><link rel="prefetch" href="/assets/js/8.0a7d41ba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.46bdbf49.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">web前端开发</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML" class="dropdown-title"><span class="title">HTML</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/html/html5/" class="nav-link">
  HTML5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS" class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/css/css3/" class="nav-link">
  CSS3
</a></li></ul></div></div><div class="nav-item"><a href="/Flex/" class="nav-link">
  Flex
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js基础/" class="nav-link">
  JS基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js高级/" class="nav-link">
  JS高级
</a></li><li class="dropdown-item"><!----> <a href="/js/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/js/正则表达式/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><a href="/jquery/" class="nav-link">
  Jquery
</a></div><div class="nav-item"><a href="/Web API/" class="nav-link">
  Web API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ajax" class="dropdown-title"><span class="title">Ajax</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/ajax/" class="nav-link router-link-exact-active router-link-active">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/ajax/axios/" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue基础/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue核心/" class="nav-link">
  vue核心
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react基础/" class="nav-link">
  react基础
</a></li><li class="dropdown-item"><!----> <a href="/react/react核心/" class="nav-link">
  react核心
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/node/Express/" class="nav-link">
  Express
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/ .html" class="nav-link">
  mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/websocket/" class="nav-link">
  webSocket
</a></li><li class="dropdown-item"><!----> <a href="/会话技术/" class="nav-link">
  会话技术
</a></li><li class="dropdown-item"><!----> <a href="/模板引擎/" class="nav-link">
  模板引擎
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jiyaning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML" class="dropdown-title"><span class="title">HTML</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/html/html5/" class="nav-link">
  HTML5
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS" class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/css/css3/" class="nav-link">
  CSS3
</a></li></ul></div></div><div class="nav-item"><a href="/Flex/" class="nav-link">
  Flex
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/js基础/" class="nav-link">
  JS基础
</a></li><li class="dropdown-item"><!----> <a href="/js/js高级/" class="nav-link">
  JS高级
</a></li><li class="dropdown-item"><!----> <a href="/js/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/js/正则表达式/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><a href="/jquery/" class="nav-link">
  Jquery
</a></div><div class="nav-item"><a href="/Web API/" class="nav-link">
  Web API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ajax" class="dropdown-title"><span class="title">Ajax</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ajax/ajax/" class="nav-link router-link-exact-active router-link-active">
  Ajax
</a></li><li class="dropdown-item"><!----> <a href="/ajax/axios/" class="nav-link">
  Axios
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue基础/" class="nav-link">
  vue基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/vue核心/" class="nav-link">
  vue核心
</a></li><li class="dropdown-item"><!----> <a href="/vue/vuex/" class="nav-link">
  vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react基础/" class="nav-link">
  react基础
</a></li><li class="dropdown-item"><!----> <a href="/react/react核心/" class="nav-link">
  react核心
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/node/Express/" class="nav-link">
  Express
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/ .html" class="nav-link">
  mysql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/websocket/" class="nav-link">
  webSocket
</a></li><li class="dropdown-item"><!----> <a href="/会话技术/" class="nav-link">
  会话技术
</a></li><li class="dropdown-item"><!----> <a href="/模板引擎/" class="nav-link">
  模板引擎
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jiyaning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Ajax</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ajax/ajax/#_1-url网址的基本概念" class="sidebar-link">1. URL网址的基本概念</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_2-请求和响应的流程" class="sidebar-link">2. 请求和响应的流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_2-1-浏览器的network面板的使用" class="sidebar-link">2.1. 浏览器的network面板的使用</a></li></ul></li><li><a href="/ajax/ajax/#_3-网站中的资源" class="sidebar-link">3. 网站中的资源</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_4-资源的请求方式get-post" class="sidebar-link">4. 资源的请求方式get post</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_4-1-传统请求发送方式" class="sidebar-link">4.1. 传统请求发送方式</a></li></ul></li><li><a href="/ajax/ajax/#_5-ajax简介" class="sidebar-link">5. AJAX简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_5-1-同步和异步的概念" class="sidebar-link">5.1. 同步和异步的概念</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_5-2-js语言特性和单线程" class="sidebar-link">5.2.js语言特性和单线程</a></li></ul></li><li><a href="/ajax/ajax/#_6-jquery中的ajax操作" class="sidebar-link">6. jQuery中的ajax操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_6-1-get-的使用" class="sidebar-link">6.1. $.get()的使用</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_6-2-post-的使用" class="sidebar-link">6.2. $.post()的使用</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_6-3-ajax-的使用" class="sidebar-link">6.3. $.ajax()的使用</a></li></ul></li><li><a href="/ajax/ajax/#_7-接口的概念" class="sidebar-link">7. 接口的概念</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_8-时间戳格式化方法" class="sidebar-link">8. 时间戳格式化方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_9-表单form" class="sidebar-link">9. 表单form</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_9-1-表单的组成部分" class="sidebar-link">9.1.  表单的组成部分</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_9-2-form标签的属性" class="sidebar-link">9.2. form标签的属性</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_9-3-表单操作的特点" class="sidebar-link">9.3. 表单操作的特点</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_9-4-常用请求方式" class="sidebar-link">9.4. 常用请求方式</a></li></ul></li><li><a href="/ajax/ajax/#_10-表单和ajax结合使用" class="sidebar-link">10. 表单和ajax结合使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_10-1-监听表单提交事件" class="sidebar-link">10.1. 监听表单提交事件</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_10-2-阻止表单的默认提交行为" class="sidebar-link">10.2. 阻止表单的默认提交行为</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_10-3-serialize-快速获取表单中的数据" class="sidebar-link">10.3. serialize()快速获取表单中的数据</a></li></ul></li><li><a href="/ajax/ajax/#_11-xmlhttprequest" class="sidebar-link">11. XMLHttpRequest</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_12-get请求" class="sidebar-link">12. get请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_12-1-get请求基本使用" class="sidebar-link">12.1.  get请求基本使用</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_12-2-带有参数的get请求" class="sidebar-link">12.2. 带有参数的get请求</a></li></ul></li><li><a href="/ajax/ajax/#_13-xhr对象的readystate属性" class="sidebar-link">13. xhr对象的readyState属性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_14-url编码" class="sidebar-link">14. url编码</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_15-post请求的发送方式" class="sidebar-link">15. post请求的发送方式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_16-get与post发送方式的区别" class="sidebar-link">16. get与post发送方式的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_17-封装ajax函数" class="sidebar-link">17. 封装ajax函数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_18-xmlhttprequest-level2的新功能" class="sidebar-link">18. XMLHttpRequest Level2的新功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_18-1-设置http请求时限" class="sidebar-link">18.1. 设置HTTP请求时限</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_18-2-formdata管理表单数据" class="sidebar-link">18.2. FormData管理表单数据</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_18-3-文件上传" class="sidebar-link">18.3. 文件上传</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_18-4-上传进度条功能" class="sidebar-link">18.4. 上传进度条功能</a></li></ul></li><li><a href="/ajax/ajax/#_19-jquery的全局ajax处理器" class="sidebar-link">19. jQuery的全局ajax处理器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ajax/ajax/#_20-同源策略和跨域" class="sidebar-link">20. 同源策略和跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_20-1-同源-同源地址" class="sidebar-link">20.1. 同源(同源地址)</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_20-2-同源策略" class="sidebar-link">20.2. 同源策略</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_20-3-跨域" class="sidebar-link">20.3. 跨域</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_20-4-跨域方式-jsonp" class="sidebar-link">20.4. 跨域方式-JSONP</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_20-5-跨域方式-cors" class="sidebar-link">20.5. 跨域方式-CORS</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_20-6-jquery发送jsonp请求的方式" class="sidebar-link">20.6.  jQuery发送JSONP请求的方式</a></li></ul></li><li><a href="/ajax/ajax/#_21-防抖和节流" class="sidebar-link">21. 防抖和节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ajax/ajax/#_21-1-防抖" class="sidebar-link">21.1. 防抖</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_21-2-节流" class="sidebar-link">21.2. 节流</a></li><li class="sidebar-sub-header"><a href="/ajax/ajax/#_21-3-节流和防抖的区别：" class="sidebar-link">21.3. 节流和防抖的区别：</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ajax"><a href="#ajax" class="header-anchor">#</a> Ajax</h1> <h2 id="_1-url网址的基本概念"><a href="#_1-url网址的基本概念" class="header-anchor">#</a> 1. URL网址的基本概念</h2> <ul><li>URL概念：统一资源定位符 （Uniform   Resource  Locator）
<ul><li>俗称网址，用来标识某个资源在网络中的唯一位置。</li></ul></li> <li>组成部分：
<ul><li>示例网址：<a href="https://detail.tmall.com/item.htmid=555428842095" target="_blank" rel="noopener noreferrer">https://detail.tmall.com/item.htmid=555428842095<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>通信协议： https://</li> <li>域名（服务器地址）： detail.tmall.com</li> <li>资源（文件）的具体位置：  /item.htm?id=555428842095</li></ul></li></ul> <h2 id="_2-请求和响应的流程"><a href="#_2-请求和响应的流程" class="header-anchor">#</a> 2. 请求和响应的流程</h2> <ul><li>任意的一次网络访问(访问网站根目录、img加载、audio加载、link标签....)都是下面的3个步骤</li> <li>步骤
<ul><li>1 <strong>请求：客户端请求服务器</strong></li> <li>2 处理：服务器的内部处理（找找资源等..）</li> <li><strong>3 响应：服务器响应客户端</strong></li></ul></li></ul> <h3 id="_2-1-浏览器的network面板的使用"><a href="#_2-1-浏览器的network面板的使用" class="header-anchor">#</a> 2.1. 浏览器的network面板的使用</h3> <blockquote><p>network用来检测浏览器发出的每次<strong>请求</strong>以及<strong>响应</strong>内容</p></blockquote> <ul><li>打开方式：浏览器 -&gt; F12 -&gt; Network -&gt; 进行操作
<ul><li>左侧为所有请求的请求列表</li> <li>顶部具有请求的筛选功能</li> <li>选择某一条请求后，可以查看请求的具体内容
<ul><li>request 请求</li> <li>response 响应</li></ul></li></ul></li></ul> <h2 id="_3-网站中的资源"><a href="#_3-网站中的资源" class="header-anchor">#</a> 3. 网站中的资源</h2> <ul><li>常见资源为：图片、文字、音视频、css文件...</li> <li>核心资源：数据（根据数据生成页面结构可以让页面制作变简便，维护成本降低）</li> <li>与html、css、js的关系
<ul><li>html是网页的结构、骨架</li> <li>css是网页的样式、颜值</li> <li>js是网页的行为、控制交互</li> <li><strong>数据是网页灵魂</strong></li></ul></li></ul> <h2 id="_4-资源的请求方式get-post"><a href="#_4-资源的请求方式get-post" class="header-anchor">#</a> 4. 资源的请求方式get post</h2> <ul><li>请求类型：get()     post()</li> <li><strong>语义的区别</strong> <ul><li>get 用来进行<strong>获取资源</strong>的请求操作
<ul><li>获取图片、音视频、js文件、css文件、地址栏输入地址回车，location.href，a标签跳转。。。</li></ul></li> <li>post 用来进行<strong>发送资源</strong>的请求操作
<ul><li>表单提交form标签（get、post均可，可以自己选择）</li> <li>ajax也可以发送get和post请求</li></ul></li></ul></li> <li><strong>可发送数据大小有区别</strong> <ul><li>get请求受限制于浏览器对url的限制，2M左右</li> <li>post请求理论上无大小限制，实际上受限制于服务端实际的业务需求和处理能力</li></ul></li> <li><strong>可发送的数据格式有区别</strong> <ul><li>get请求只能发送文本格式数据</li> <li>post请求不限制发送的数据格式，服务器会根据业务需求进行处理</li></ul></li></ul> <h3 id="_4-1-传统请求发送方式"><a href="#_4-1-传统请求发送方式" class="header-anchor">#</a> 4.1. 传统请求发送方式</h3> <ul><li>地址栏</li> <li>a标签</li> <li>location.href</li> <li>img.src  link.href 我们无法进行干预</li> <li>form+submit</li></ul> <blockquote><p>上面发送请求的方式，统一特点：<strong>都会出现跳转(有的是我们无法干预的)</strong></p> <p>实际页面功能制作时，很多的功能虽然请求了新的数据，但是并没有出现跳转，只是局部刷新</p> <p>结论：传统的请求方式无法满足现代网页的所有功能，就需要使用新的请求方式----AJAX。</p></blockquote> <h2 id="_5-ajax简介"><a href="#_5-ajax简介" class="header-anchor">#</a> 5. AJAX简介</h2> <blockquote><p>Ajax（<strong>Async</strong>hronous Javascript And XML（异步 JavaScript 和 XML））</p></blockquote> <ul><li>作用：用来发送请求的一种方式</li> <li>实现方式：浏览器提供了一个XMLHttpRequest的构造函数，创建的对象用来进行ajax操作</li> <li>特点：无需刷新页面，也可以进行请求响应处理（局部刷新）</li></ul> <h3 id="_5-1-同步和异步的概念"><a href="#_5-1-同步和异步的概念" class="header-anchor">#</a> 5.1. 同步和异步的概念</h3> <blockquote><p>同步任务：</p></blockquote> <ul><li><strong>执行顺序：代码按顺序从上往下一个一个执行。</strong></li> <li>除了异步任务都是同步任务。</li></ul> <blockquote><p>异步任务：</p></blockquote> <ul><li>为什么要有异步任务: 因为某些任务较为耗时，或执行时间不确定，为了避免卡住（阻塞）后续代码，设置为异步任务。</li> <li>常见异步任务有：
<ul><li>定时器
<ul><li>示例：无论定时器的时间为多少，都会比同步任务执行晚。</li></ul></li> <li>Ajax</li></ul></li> <li><strong>执行顺序：异步任务的执行一定晚于同步任务</strong></li></ul> <h3 id="_5-2-js语言特性和单线程"><a href="#_5-2-js语言特性和单线程" class="header-anchor">#</a> 5.2.js语言特性和单线程</h3> <blockquote><p>js的语言特性</p></blockquote> <ul><li>js是弱类型语言</li> <li>js是动态语言</li> <li>js是脚本语言</li> <li>js是基于对象的语言(面向对象语言)</li> <li>js是基于原型的语言</li> <li>js是事件驱动的语言</li> <li>js是单线程的语言</li></ul> <blockquote><p>单线程（只有一个人干活）</p></blockquote> <ul><li>因为js中具有DOM操作，例如修改元素颜色，单个线程操作不会与其他线程产生干扰冲突</li> <li>es5后js也出现了多线程的概念，但是有限制，多个线程只能进行辅助操作，主线程进行控制</li></ul> <blockquote><p>多线程（有好多人干活）</p></blockquote> <h2 id="_6-jquery中的ajax操作"><a href="#_6-jquery中的ajax操作" class="header-anchor">#</a> 6. jQuery中的ajax操作</h2> <h3 id="_6-1-get-的使用"><a href="#_6-1-get-的使用" class="header-anchor">#</a> 6.1. $.get()的使用</h3> <blockquote><p>没有请求参数，不接收响应数据</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>地址<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过浏览器调试工具的network查看请求的细节和响应的数据</span>

$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>没有请求参数，接收响应数据</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>地址<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 响应接收完毕后，执行回调函数</span>
    <span class="token comment">// res代表响应的数据，如果res为JSON格式，jQuery会自动转换为js对象</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 响应完成后，触发这个回调函数</span>
    <span class="token comment">// 回调函数的参数表示响应的数据，一般称为response或res</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>有请求参数，接收响应数据</p> <p>请求参数：请求中发送给服务端的数据，是一个对象</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>地址<span class="token punctuation">,</span> 请求参数组成的对象<span class="token punctuation">,</span> 回调函数<span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_6-2-post-的使用"><a href="#_6-2-post-的使用" class="header-anchor">#</a> 6.2. $.post()的使用</h3> <blockquote><p>没有请求参数，不接收响应数据</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>地址<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过浏览器调试工具的network查看请求的细节和响应的数据</span>

$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://192.168.141.45:3005/common/post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>没有请求参数，接收响应数据</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>地址<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 响应接收完毕后，执行回调函数</span>
    <span class="token comment">// res代表响应的数据，如果res为JSON格式，jQuery会自动转换为js对象</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://192.168.141.45:3005/common/post'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>有请求参数，接收响应数据</p> <p>请求参数：请求中发送给服务端的数据，是一个对象</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>地址<span class="token punctuation">,</span> 请求参数组成的对象<span class="token punctuation">,</span> 回调函数<span class="token punctuation">)</span><span class="token punctuation">;</span>

$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>
    <span class="token string">'http://192.168.141.45:3005/common/post'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_6-3-ajax-的使用"><a href="#_6-3-ajax-的使用" class="header-anchor">#</a> 6.3. $.ajax()的使用</h3> <ul><li>type表示请求方式，默认为'GET'，可以设置为'GET'/'POST'</li> <li>url表示请求地址，只有url属性是必须设置的</li> <li>data表示请求参数，对象结构</li> <li>success表示响应成功时的处理函数，res参数，表示响应内容</li></ul> <blockquote><p>1.使用$.ajax()发送GET请求</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// type: 'GET', // 默认为GET，一般发送GET请求时，都不设置type</span>
    url<span class="token operator">:</span> <span class="token string">'http://192.168.141.45:3005/common/get'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
        gender<span class="token operator">:</span> <span class="token string">'男'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><ol start="2"><li>使用$.ajax()发送POST请求</li></ol></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'http://192.168.141.45:3005/common/post'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        width<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        height<span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
        bgc<span class="token operator">:</span> <span class="token string">'red'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>$.get()</code>、<code>$.post()</code> 与 <code>$.ajax()</code>的关系</p> <blockquote><p><code>$.ajax()</code>是jQuery中设置的一个用来进行ajax请求发送的方法 ，<code>$.get()</code>、 <code>$.post()</code>只是调用了<code>$.ajax()</code>实现的功能</p></blockquote> <h2 id="_7-接口的概念"><a href="#_7-接口的概念" class="header-anchor">#</a> 7. 接口的概念</h2> <ul><li>接口：
<ul><li>概念：指的是<strong>能够提供某种能力</strong>的事物。</li></ul></li> <li>应用程序编程接口（API）
<ul><li>概念：提供应用程序编程能力的事物</li> <li>WebAPI
<ul><li>浏览器提供的，与web开发相关的一些API，本质上就是一堆属性方法</li></ul></li> <li>内置对象API
<ul><li>js解析器提供的，用于js基础语法操作的一些API，本质上就是一堆属性方法</li></ul></li> <li>js的组成部分和浏览器的主要构成
<ul><li>浏览器的两个主要构成部分
<ul><li>内核(渲染引擎): html和css渲染，WebAPI</li> <li>js解析器：执行ECMAScript</li></ul></li> <li>规范相关内容：
<ul><li>w3c规范：html  css  webAPI</li> <li>ECMA规范：语法(含内置对象)</li></ul></li></ul></li></ul></li> <li>数据接口：
<ul><li>概念：是<strong>能够提供数据的</strong>一种事物。表现形式就是一个URL
<ul><li><strong>简单来说，能够提供数据的一个URL地址，就称为是数据接口</strong></li></ul></li> <li>说明：当进行前端和后端(服务器)交互时，所说的'<strong>接口</strong>'，指的就是数据接口。</li> <li>使用方式：<strong>严格遵守接口的文档进行操作即可。</strong></li></ul></li></ul> <h2 id="_8-时间戳格式化方法"><a href="#_8-时间戳格式化方法" class="header-anchor">#</a> 8. 时间戳格式化方法</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 用来将时间戳进行日期格式化的函数：</span>
<span class="token keyword">function</span> <span class="token function">dateFormat</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> y <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> m <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    m <span class="token operator">=</span> m <span class="token operator">&gt;</span> <span class="token number">9</span> <span class="token operator">?</span> m <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> m<span class="token punctuation">;</span>
    <span class="token keyword">var</span> d <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    d <span class="token operator">=</span> d <span class="token operator">&gt;</span> <span class="token number">9</span> <span class="token operator">?</span> d <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> d<span class="token punctuation">;</span>
    <span class="token keyword">var</span> h <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    h <span class="token operator">=</span> h <span class="token operator">&gt;</span> <span class="token number">9</span> <span class="token operator">?</span> h <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> h<span class="token punctuation">;</span>
    <span class="token keyword">var</span> mm <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mm <span class="token operator">=</span> mm <span class="token operator">&gt;</span> <span class="token number">9</span> <span class="token operator">?</span> mm <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> mm<span class="token punctuation">;</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    s <span class="token operator">=</span> s <span class="token operator">&gt;</span> <span class="token number">9</span> <span class="token operator">?</span> s <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> s<span class="token punctuation">;</span>
    <span class="token keyword">return</span> y <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> m <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> h <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> mm <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> time<span class="token operator">=</span><span class="token number">1575808501208</span><span class="token punctuation">;</span>    <span class="token comment">// -------时间戳</span>
time<span class="token operator">=</span><span class="token function">dateFormat</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_9-表单form"><a href="#_9-表单form" class="header-anchor">#</a> 9. 表单form</h2> <blockquote><p>表单在网页中主要负责数据采集功能。HTML中的</p><form>标签，就是用于采集用户输入的信息 ,<p></p> <p>由于</p><form>标签的submit提交操作会发生跳转，用户体验很差，页面之前的状态和数据会丢失。<p></p> <p><strong>经常使用表单进行数据采集(用输入框等元素获取输入内容)，使用ajax进行请求发送即可(提交)</strong></p></form></form></blockquote> <h3 id="_9-1-表单的组成部分"><a href="#_9-1-表单的组成部分" class="header-anchor">#</a> 9.1.  表单的组成部分</h3> <ul><li><p>form标签</p></li> <li><p>表单域：input标签。。textarea。。select....</p></li> <li><p>提交按钮：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>如果希望button不进行提交操作，只是普通按钮，可以设置type为button</li></ul></li></ul> <h3 id="_9-2-form标签的属性"><a href="#_9-2-form标签的属性" class="header-anchor">#</a> 9.2. form标签的属性</h3> <blockquote><form>标签的属性则是用来规定如何把采集到的数据发送到服务器。
</form></blockquote> <ul><li>action
<ul><li>action 属性的值是一个URL地址，定义向何处提交表单，默认值为当前页面的 URL 地址。</li> <li>注意：当提交表单后，页面会立即跳转到 action 属性指定的 URL 地址。</li></ul></li> <li>target
<ul><li>规定在何处打开 action URL。</li> <li>_self 默认在本窗口打开   _blank在新窗口打开</li></ul></li> <li>method
<ul><li>规定以何种方式把表单数据提交到 action URL ，get和post</li></ul></li> <li>enctype
<ul><li>规定在发送表单数据之前如何对数据进行编码</li> <li>在涉及到文件上传的操作时，必须将 enctype 的值设置为 multipart/form-data</li></ul></li></ul> <h3 id="_9-3-表单操作的特点"><a href="#_9-3-表单操作的特点" class="header-anchor">#</a> 9.3. 表单操作的特点</h3> <ul><li>提交数据时会出现页面跳转的情况</li> <li>提交后，页面之前的状态和数据会丢失。</li></ul> <h3 id="_9-4-常用请求方式"><a href="#_9-4-常用请求方式" class="header-anchor">#</a> 9.4. 常用请求方式</h3> <ul><li><strong>使用表单进行数据采集(用输入框等元素获取输入内容)，使用ajax进行请求发送即可(提交)</strong></li></ul> <h2 id="_10-表单和ajax结合使用"><a href="#_10-表单和ajax结合使用" class="header-anchor">#</a> 10. 表单和ajax结合使用</h2> <h3 id="_10-1-监听表单提交事件"><a href="#_10-1-监听表单提交事件" class="header-anchor">#</a> 10.1. 监听表单提交事件</h3> <p>在 jQuery 中，可以使用如下两种方式，监听到表单的提交事件：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#form1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'监听到了表单的提交事件'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#form1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'监听到了表单的提交事件'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_10-2-阻止表单的默认提交行为"><a href="#_10-2-阻止表单的默认提交行为" class="header-anchor">#</a> 10.2. 阻止表单的默认提交行为</h3> <blockquote><p>在submit事件中，设置e.preventDefault()方法即可(推荐)， return false也可以</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#form1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 阻止表单的提交和页面的跳转</span>
   e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#form1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 阻止表单的提交和页面的跳转</span>
   e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_10-3-serialize-快速获取表单中的数据"><a href="#_10-3-serialize-快速获取表单中的数据" class="header-anchor">#</a> 10.3. serialize()快速获取表单中的数据</h3> <blockquote><p>jQuery的serialize()方法可以快速获取表单中的所有数据(<strong>只能获取纯文本数据</strong>)</p></blockquote> <p>为了简化表单中数据的获取操作，jQuery 提供了 serialize() 函数，其语法格式如下 :</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>serialize() 函数的好处：可以一次性获取到表单中的所有的数据。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>form id<span class="token operator">=</span><span class="token string">&quot;form1&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#form1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 调用的结果：</span>
<span class="token comment">// username=用户名的值&amp;password=密码的值</span>
注意：在使用 <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 函数快速获取表单数据时，必须为每个表单元素添加 name 属性！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>注意：这种内容格式可以通过<code>$.get $.post $.ajax</code>进行直接发送</li> <li>注意表单元素如果没有name，数据是无法正确提交的</li></ul> <h2 id="_11-xmlhttprequest"><a href="#_11-xmlhttprequest" class="header-anchor">#</a> 11. XMLHttpRequest</h2> <blockquote><p>XMLHttpRequest（简称 xhr）是浏览器提供的 Javascript 对象，通过它，可以请求服务器上的数据资源。</p> <p>jQuery 中的 Ajax 函数，就是基于 xhr 对象封装出来的.</p></blockquote> <h2 id="_12-get请求"><a href="#_12-get请求" class="header-anchor">#</a> 12. get请求</h2> <h3 id="_12-1-get请求基本使用"><a href="#_12-1-get请求基本使用" class="header-anchor">#</a> 12.1.  get请求基本使用</h3> <blockquote><p><strong>步骤：</strong></p></blockquote> <ol><li>创建xhr对象</li> <li>调用xhr.open()：设置请求方式和请求地址</li> <li>调用xhr.send():   发送请求（这一步是异步操作）</li> <li>设置onreadystatechange事件，监听请求的各种状态
<ul><li>readyState是xhr的属性，用来表示请求发送的状态
<ul><li>取值为4代表下载完毕</li> <li>必须确保readyState为4才能使用响应的数据</li></ul></li> <li>xhr.status 代表请求是否成功
<ul><li>200代表请求是成功的</li></ul></li> <li>xhr.responseText 代表接收的响应内容</li></ul></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1 创建xhr对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2 调用xhr.open()：设置请求方式和请求地址</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3 调用xhr.send(): 发送请求，这一步是异步操作</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4 设置事件，监听请求的各种状态</span>
<span class="token comment">// readyState是xhr的属性，用来表示请求发送的状态</span>
<span class="token comment">//    取值为4代表下载完毕</span>
<span class="token comment">//    必须确保readyState为4才能使用响应的数据</span>
<span class="token comment">// 进一步检测：</span>
<span class="token comment">//      xhr.status 代表请求是否成功</span>
<span class="token comment">//      200代表请求是成功的</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 4.1 检测xhr.readyState取值和xhr.status取值</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 4.2 接收响应的数据即可</span>
        <span class="token comment">// 原生接收的响应内容是JSON格式，需要自己进行转换</span>
        <span class="token comment">// jQuery会自动转换</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_12-2-带有参数的get请求"><a href="#_12-2-带有参数的get请求" class="header-anchor">#</a> 12.2. 带有参数的get请求</h3> <ul><li><p><strong>位置：在xhr.open()的参数2 url后面书写参数内容</strong></p></li> <li><p>名称：参数的形式称为<strong>查询字符串</strong></p></li> <li><p>格式：  ?名=值&amp;名=值...</p> <ul><li>其中  名=值&amp;名=值...  称为<strong>url编码格式，英文为urlencoded</strong></li></ul></li> <li><p>jQuery的get请求和原生get请求的<strong>本质是一样</strong>的</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1 创建xhr对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2 调用open：设置请求方式和请求地址</span>
<span class="token comment">// 如果希望设置get请求的请求参数，需要放置在open()参数2地址的最后位置</span>
<span class="token comment">// 书写方式为：  地址?名=值&amp;名=值....</span>
<span class="token comment">// 名称说明： 名=值&amp;名=值称为url编码格式  urlencoded</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks?id=3&amp;name=jack&amp;age=18'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3 调用send: 发送请求，这一步是异步操作</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4 设置事件，监听请求的各种状态</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 4.1 检测xhr.readyState取值和xhr.status取值</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 4.2 接收响应的数据即可</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_13-xhr对象的readystate属性"><a href="#_13-xhr对象的readystate属性" class="header-anchor">#</a> 13. xhr对象的readyState属性</h2> <blockquote><p>XMLHttpRequest 对象的 readyState 属性，用来表示当前 Ajax 请求所处的状态。</p> <p>每个 Ajax 请求必然处于以下状态中的一个：</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>值                状态                            描述
0               unsent                  XMLHttpRequest对象已被创建，但尚未调用open（）方法
1               opened                  open（）方法已经被调用
2               headers_received        send（）方法已经被调用，响应头也已经被接收
3               loading                 数据接收中
4                done                   Ajax请求完成，下载完毕
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_14-url编码"><a href="#_14-url编码" class="header-anchor">#</a> 14. url编码</h2> <blockquote><p>URL 地址中，只允许出现英文相关的字母、标点符号、数字，因此，在 URL 地址中不允许出现中文字符。</p></blockquote> <blockquote><p>如果 URL 中需要包含中文这样的字符，则必须对中文字符进行编码（转义）。</p></blockquote> <blockquote><p>URL编码的原则：使用安全的字符（没有特殊用途或者特殊意义的可打印字符）去表示那些不安全的字符。</p></blockquote> <blockquote><p>URL编码原则的通俗理解：使用英文字符去表示非英文字符。</p></blockquote> <ul><li><strong>url编码是url对地址的一种处理方式(将中文部分进行编码转换</strong>)</li> <li>浏览器会进行自动的url处理，无需我们自己操作</li> <li>两个用来处理的函数
<ul><li>encodeURI() 编码</li> <li>decodeURI() 解码</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使用encodeURI() 对内容进行编码</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'黑马程序员'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'传智播客'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用decodeURI() 对内容进行解码</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">decodeURI</span><span class="token punctuation">(</span><span class="token string">'%E9%BB%91%E9%A9%AC%E7%A8%8B'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">decodeURI</span><span class="token punctuation">(</span><span class="token string">'%E5%BA%8F%E5%91%98'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_15-post请求的发送方式"><a href="#_15-post请求的发送方式" class="header-anchor">#</a> 15. post请求的发送方式</h2> <blockquote><p>步骤：</p></blockquote> <ol><li>创建xhr对象</li> <li>调用xhr.open()</li> <li>设置Content-Type（内容格式、内容类型）
<ul><li>xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')</li></ul></li> <li>调用xhr.send(数据)
<ul><li>数据为url编码格式</li></ul></li> <li>设置readystatechange事件获取响应内容</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1 创建xhr对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2 调用xhr.open()</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/addbook'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3 设置Content-Type内容格式(固定写法)</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4 调用xhr.send()</span>
<span class="token comment">//    - 如果具有请求参数，书写在send中，格式也是url编码格式（名=值&amp;名=值...）</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'bookname=老人与海&amp;author=海明威&amp;publisher=大海图书出版社'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5 设置readystatechange事件，接收响应的数据</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_16-get与post发送方式的区别"><a href="#_16-get与post发送方式的区别" class="header-anchor">#</a> 16. get与post发送方式的区别</h2> <blockquote><p><strong>请求参数的书写位置不同：</strong></p></blockquote> <ul><li>get请求方式：在xhr.open()的url后面使用?连接</li> <li>post请求：在xhr.send()中书写</li></ul> <blockquote><p><strong>post请求需要设置Content-Type</strong></p></blockquote> <h2 id="_17-封装ajax函数"><a href="#_17-封装ajax函数" class="header-anchor">#</a> 17. 封装ajax函数</h2> <blockquote><p>封装用来将对象转换为url编码的函数</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 封装函数，用于将对象转换为url编码格式</span>
<span class="token keyword">function</span> <span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 声明数组用来保存结果</span>
    <span class="token comment">// 遍历obj，获取所有属性</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// k - 属性名 - 字符串类型</span>
        <span class="token comment">// obj[k] - 属性值</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>封装ajax函数</p></blockquote> <ul><li><strong>转换字符串为大小写的字符串方法</strong> <ul><li>字符串.toUpperCase() 转换为大写字母</li> <li>字符串.toLowerCase() 转换为小写字母</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 封装用来发送ajax请求的函数
//  参数：
//    对象
//      - type 请求方式
//      - url 请求地址
//      - data 请求参数
//      - success 回调函数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1 创建xhr对象</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2 设置请求的相关信息: 需要根据请求方式分别设置</span>
    <span class="token comment">//  统一保存数据</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token function">urlencoded</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//  2.1 将请求方式统一转换为大写(或小写)</span>
    <span class="token keyword">var</span> type <span class="token operator">=</span> options<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//  2.2 对请求方式进行检测</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'POST'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 3 设置事件接收响应内容</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 3.1 检测</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 3.2 将JSON格式的字符串转换为对象</span>
            <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            options<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 进行数据处理的函数</span>
<span class="token keyword">function</span> <span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 声明数组用来保存结果</span>
    <span class="token comment">// 遍历obj，获取所有属性</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// k - 属性名 - 字符串类型</span>
        <span class="token comment">// obj[k] - 属性值</span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>可选：可以给ajax函数的options中的属性设置默认值

- type默认值为'GET'
- data默认为''
- success如果不存在，则不进行调用，避免报错
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_18-xmlhttprequest-level2的新功能"><a href="#_18-xmlhttprequest-level2的新功能" class="header-anchor">#</a> 18. XMLHttpRequest Level2的新功能</h2> <blockquote><p>可以设置 HTTP 请求的时限</p></blockquote> <blockquote><p>可以使用 FormData 对象管理表单数据</p></blockquote> <blockquote><p>可以上传文件</p></blockquote> <blockquote><p>可以获得数据传输的进度信息</p></blockquote> <h3 id="_18-1-设置http请求时限"><a href="#_18-1-设置http请求时限" class="header-anchor">#</a> 18.1. 设置HTTP请求时限</h3> <blockquote><p>设置方式：</p></blockquote> <ul><li>属性：  xhr.timeout = 超时时间; //  毫秒单位</li> <li>时间：  xhr.ontimeout = function() { 请求超时后，触发的事件 };</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置请求的超时时间(毫秒单位)</span>
xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>

<span class="token comment">// 设置事件，对超时进行处理</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'网络开小差了，请稍后再试!~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_18-2-formdata管理表单数据"><a href="#_18-2-formdata管理表单数据" class="header-anchor">#</a> 18.2. FormData管理表单数据</h3> <blockquote><p>FormData的作用：</p></blockquote> <ul><li>可以快速处理表单的数据</li> <li>可以进行文件上传</li></ul> <blockquote><p><strong>注意点：</strong></p></blockquote> <ul><li><strong>发送FormData需要使用POST请求方式</strong></li> <li><strong>不需要单独设置Content-Type</strong></li></ul> <blockquote><p>使用方式：</p></blockquote> <blockquote><p>1.单独发送数据:创建空FormData对象，添加数据后发送</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1.1 创建FormData对象</span>
<span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 空的FormData对象</span>
<span class="token comment">// 1.2 向fd中添加一些数据</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1.3 使用POST方法将fd发送到对应接口（此处的接口为formdata）</span>
<span class="token comment">//  无需设置之前post的content-type</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/formdata'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将fd放入在send()参数中即可</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>2.处理表单数据:通过form表单获取数据后发送</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置form标签，用来进行formdata操作 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>form id<span class="token operator">=</span><span class="token string">&quot;testForm&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 如果要表单元素数据被请求发送，必须设置name <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置按钮，点击后，使用FormData处理表单数据 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>ajax提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

<span class="token comment">// 2 通过FormData对象管理表单元素，再发送(同时也可以添加数据)</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2.1 创建FormData对象，传入DOM对象形式的form标签到参数中</span>
    <span class="token keyword">var</span> testForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'testForm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>testForm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 空的FormData对象</span>

    <span class="token comment">// 2.1.1 也可以在存在form的基础上，自己添加数据</span>
    fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'rose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.3 使用POST方法将fd发送到对应接口（此处的接口为formdata）</span>
    <span class="token comment">//  - 无需设置之前post的content-type</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/formdata'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将fd放入在send()参数中即可</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_18-3-文件上传"><a href="#_18-3-文件上传" class="header-anchor">#</a> 18.3. 文件上传</h3> <ul><li><strong>1 准备结构(文件域)</strong></li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>2 检测用户是否选择了文件</strong> <ul><li>对DOM对象形式的<code>input[type=&quot;file&quot;]</code>的<strong>files</strong>属性进行检测
<ul><li>如果内部存储了任意的一个值，就说明选取了文件，否则就是没选</li></ul></li></ul></li> <li>3 使用FormData保存文件信息
<ul><li>使用fd.append()添加即可</li></ul></li> <li>4 通过ajax发送</li> <li>5 响应处理，展示服务端获取到的图片</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;iptFile&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>点击上传文件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;pic&quot;</span><span class="token operator">&gt;</span>
    
    <span class="token comment">// 1 给按钮设置点击事件</span>
    <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> iptFile <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#iptFile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> pic <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pic'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 2 检测是否上传了文件，需要检测文件域的files属性</span>
      <span class="token comment">//  files是一个伪数组，可以通过判断length，检测是否选择了文件</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>iptFile<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 说明没有选择文件</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'请选择文件后提交!~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 3 通过FormData保存文件信息</span>
      <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// avatar是接口中规定的请求参数名称</span>
      <span class="token comment">// files[0]代表选择的文件的相关信息</span>
      fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'avatar'</span><span class="token punctuation">,</span> iptFile<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 4 发送post形式的ajax，将fd发送给服务端处理</span>
      <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/upload/avatar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 5 接收响应数据</span>
      xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// 5.1 检测上传是否成功</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 5.2 将响应的图片在线地址，放入到img中展示</span>
            pic<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://www.liulongbin.top:3006'</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>url
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><blockquote><p>jQuery使用FormData上传文件的注意点</p></blockquote> <ul><li>必须设置两个属性
<ul><li>contentType: false 不指定内容类型</li> <li>processData: false 不进行数据处理</li></ul></li></ul> <h3 id="_18-4-上传进度条功能"><a href="#_18-4-上传进度条功能" class="header-anchor">#</a> 18.4. 上传进度条功能</h3> <blockquote><p>xhr.upload.onprogress     上传中实时触发事件</p></blockquote> <blockquote><p>事件对象e的属性</p></blockquote> <ul><li>e.lengthComputable       是一个布尔值，表示当前上传的资源是否具有可计算的长度</li> <li>e.loaded                            已传输的字节</li> <li>e.total                                 需传输的总字节</li></ul> <blockquote><p>xhr.upload.onload         上传完毕时触发事件</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
      1 检测上传过程的事件
        xhr.upload.onprogress = function(e) ...
      2 检测文件大小是否可用
        e.lengthComputable 布尔值
      3 计算进度
        e.loaded 已加载的大小
        e.total  总大小
      3.1 计算方式
        e.loaded / e.total 上传的进度

      制作进度条功能的思路：
        - 设置内外两个盒子，外部盒子定宽度，内部盒子宽度默认为0
        - 上传中，根据上传的进度设置内部盒子宽度对应改变即可

      xhr.upload.onload 上传完毕后触发的事件
    */</span>

<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> iptFile <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#iptFile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pic <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'pic'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2 检测是否上传了文件，需要检测文件域的files属性</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>iptFile<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'请选择文件后提交!~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3 通过FormData保存文件信息</span>
    <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'avatar'</span><span class="token punctuation">,</span> iptFile<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4 发送post形式的ajax，将fd发送给服务端处理</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置上传文件的进度监测</span>
    xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 判断e.lengthComputable是否为true，为true表示可以进行计算</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 根据e.loaded和e.total计算进度比例</span>
            <span class="token keyword">var</span> bili <span class="token operator">=</span> e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'percent'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> bili<span class="token punctuation">;</span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'percent'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> bili<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置上传文件完成的事件(更改样式)</span>
    xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'percent'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'progress-bar progress-bar-success'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/upload/avatar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 5 接收响应数据</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 5.1 检测上传是否成功</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 5.2 将响应的图片在线地址，放入到img中展示</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h2 id="_19-jquery的全局ajax处理器"><a href="#_19-jquery的全局ajax处理器" class="header-anchor">#</a> 19. jQuery的全局ajax处理器</h2> <blockquote><p>作用：用来对页面中的ajax操作进行统一设置，简化操作</p> <p>常见场景：加载资源的loading功能</p></blockquote> <blockquote><p>ajaxStart() 任意请求开始时触发内部回调</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//使用全局ajax处理器检测请求发送的操作，并将loading图展示</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ajaxStart</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log('发送了ajax请求');</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>ajaxStop() 任意请求结束后触发内部回调</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//使用全局ajax处理器检测请求完毕的状态，并将loading图隐藏</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ajaxStop</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>在ajax内部自己封装加载资源的loading功能</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//在请求开始之前将loading图展示</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/getbooks&quot;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//请求完毕，并将loading图隐藏</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_20-同源策略和跨域"><a href="#_20-同源策略和跨域" class="header-anchor">#</a> 20. 同源策略和跨域</h2> <h3 id="_20-1-同源-同源地址"><a href="#_20-1-同源-同源地址" class="header-anchor">#</a> 20.1. 同源(同源地址)</h3> <blockquote><p>指的是两个页面地址的 <strong>协议 域名 端口</strong> 完全一样，这两个地址就是同源的，或者称为同源地址。</p></blockquote> <ul><li>我们发现，在现代网站中(京东)一个公司可能具有很多的域名，也都不是同源地址，如果在公司内部都不能进行数据请求，是很不方便的。</li></ul> <h3 id="_20-2-同源策略"><a href="#_20-2-同源策略" class="header-anchor">#</a> 20.2. 同源策略</h3> <blockquote><p>同源策略（英文全称 Same origin policy）是浏览器提供的一个安全功能。</p></blockquote> <blockquote><p>同源策略不允许和非同源的网站之间发送ajax请求</p></blockquote> <blockquote><p>发送跨域请求时，请求发送是成功的，响应也是成功的，只不过浏览器将响应的信息拦截了，我们无法操作。</p></blockquote> <ul><li>对我们操作的影响，无法对非同源的地址发送ajax请求(不能跨域)</li></ul> <h3 id="_20-3-跨域"><a href="#_20-3-跨域" class="header-anchor">#</a> 20.3. 跨域</h3> <blockquote><p>跨域指的是非同源网站之间发送ajax请求</p></blockquote> <blockquote><p>现在，实现跨域数据请求，最主要的两种解决方案，分别是 JSONP 和 CORS。</p></blockquote> <blockquote><p>JSONP</p> <p>兼容性好，但是只支持GET</p></blockquote> <blockquote><p>CORS</p> <p>兼容性不太好，但是支持GET、POST，并且是标准中提供的方式。</p></blockquote> <h3 id="_20-4-跨域方式-jsonp"><a href="#_20-4-跨域方式-jsonp" class="header-anchor">#</a> 20.4. 跨域方式-JSONP</h3> <blockquote><p>JSONP：出现的早，兼容性好（兼容低版本IE）。是前端程序员为了解决跨域问题，被迫想出来的一种临时解决方案。缺点是只支持 GET 请求，不支持 POST 请求。</p></blockquote> <blockquote><p>JSONP (JSON with Padding) 是 JSON 的一种“使用模式”，可用于解决主流浏览器的跨域数据访问的问题。</p></blockquote> <blockquote><p>由于浏览器同源策略的限制，网页中无法通过 Ajax 请求非同源的接口数据。</p> <p>但是 <code>&lt;script&gt;</code> 标签不受浏览器同源策略的影响，可以通过 src 属性，请求非同源的 js 脚本。</p></blockquote> <ul><li>JSONP 的实现原理:</li></ul> <blockquote><p>通过 <code>&lt;script&gt;</code>标签的 src 属性，请求跨域的数据接口，并通过函数调用的形式，接收跨域接口响应回来的数据。</p></blockquote> <blockquote><p>同源策略不限制script标签对非同源地址进行请求</p> <p>可以借助script标签进行JSONP实现</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 
使用<span class="token constant">JSONP</span>进行请求处理
步骤<span class="token operator">:</span>
<span class="token number">1</span> 准备一个处理函数
<span class="token number">2</span> 通过script标签的src属性，进行接口的请求
    <span class="token operator">-</span> 因为同源策略不会限制script标签的功能
<span class="token number">3</span> 请求时传入请求参数
    <span class="token operator">-</span> callback 用来传递本地处理函数的函数名
        <span class="token operator">-</span> 其他参数随便写
<span class="token number">4</span> 当响应结束后，步骤<span class="token number">1</span>设置的处理函数会自动调用
    <span class="token operator">-</span> 可以在处理函数中对响应数据进行后续处理
<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;http://ajax.frontend.itheima.net:3006/api/jsonp?callback=fun&amp;name=jack&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>说明：</p></blockquote> <ul><li>JSONP和JSON没有本质关联</li> <li><strong>JSONP与ajax没有任何关联</strong> <ul><li>JSONP是使用script标签的src属性进行请求发送</li> <li>ajax是通过浏览器提供的XMLHttpRequest对象发送请求</li></ul></li></ul> <h3 id="_20-5-跨域方式-cors"><a href="#_20-5-跨域方式-cors" class="header-anchor">#</a> 20.5. 跨域方式-CORS</h3> <p>CORS：出现的较晚，它是 W3C 标准，属于跨域 Ajax 请求的根本解决方案。支持 GET 和 POST 请求。缺点是不兼容某些低版本的浏览器。</p> <h3 id="_20-6-jquery发送jsonp请求的方式"><a href="#_20-6-jquery发送jsonp请求的方式" class="header-anchor">#</a> 20.6.  jQuery发送JSONP请求的方式</h3> <blockquote><p>jQuery 中的 JSONP，也是通过 <code>&lt;script&gt;</code> 标签的 src 属性实现跨域数据访问的,</p> <p>只不过，jQuery 采用的是动态创建和移除 <code>&lt;script&gt;</code>标签的方式，来发起 JSONP 数据请求。</p></blockquote> <blockquote><p>在发起 JSONP 请求的时候，动态向 <code>&lt;header&gt;</code> 中 append 一个<code>&lt;script&gt;</code> 标签；</p> <p>在 JSONP 请求成功以后，动态从 <code>&lt;header&gt;</code>中移除刚才 append 进去的 <code>&lt;script&gt;</code> 标签；</p></blockquote> <blockquote><p>jQuery使用的是<code>$.ajax()</code>方法进行JSONP操作,</p></blockquote> <ul><li><p><strong>设置dataType属性为'jsonp'</strong></p></li> <li><p>说明：</p> <ul><li>可以从浏览器的network看到请求的类型为 script</li> <li>jQuery会将使用过的用于发送jsonp请求的script标签移除，打开页面也看不到</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'http://ajax.frontend.itheima.net:3006/api/jsonp'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 下面的两个属性作为了解即可，通常不会使用</span>
    <span class="token comment">//jsonp: 'xyz',          // 将默认的请求参数名callback设置为其他名称</span>
    <span class="token comment">//jsonpCallback: 'abc',  // 将处理函数名称设置为指定名称</span>

    dataType<span class="token operator">:</span> <span class="token string">'jsonp'</span><span class="token punctuation">,</span>      <span class="token comment">// 设置这句话后，jQuery就会使用JSONP的方式进行请求发送</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_21-防抖和节流"><a href="#_21-防抖和节流" class="header-anchor">#</a> 21. 防抖和节流</h2> <h3 id="_21-1-防抖"><a href="#_21-1-防抖" class="header-anchor">#</a> 21.1. 防抖</h3> <blockquote><p>防抖策略（debounce）是当事件被触发后，延迟 n 秒后再执行回调，如果在这 n 秒内事件又被触发，则重新计时。</p></blockquote> <blockquote><p>进行重复操作时，设置时间间隔，以最后一次满足间隔的操作为准进行执行。</p> <p>简单来说：<strong>就是以满足间隔的最后一次为准执行事件</strong></p> <p>应用场景 ：用户在输入框中连续输入一串字符时，可以通过防抖策略，只在输入完后，才执行查询的请求，这样可以有效减少请求次数，节约请求资源。设置防抖操作可以减少页面中不必要的请求次数</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// --- 设置防抖功能</span>
<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 用来保存进行防抖操作的定时器id</span>

<span class="token comment">// 设置事件</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// --- 如果再次输入，将上次的定时器清除即可</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// --- 通过定时器控制</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">getData</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 封装函数，用来进行数据请求</span>
<span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'https://suggest.taobao.com/sug'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span> q<span class="token operator">:</span> val <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">// 淘宝的这个接口指定了请求参数名为q,代表要查询的内容</span>
        dataType<span class="token operator">:</span> <span class="token string">'jsonp'</span><span class="token punctuation">,</span> <span class="token comment">// 使用jsonp方式发送请求</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 3 检测数据并创建结构(封装为函数，在多个地方使用)</span>
            <span class="token function">renderList</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_21-2-节流"><a href="#_21-2-节流" class="header-anchor">#</a> 21.2. 节流</h3> <blockquote><p>节流策略（throttle），顾名思义，可以减少一段时间内事件的触发频率。</p></blockquote> <blockquote><p>概念：也可以称为函数节流，目的是减少某些操作的触发速度</p></blockquote> <blockquote><p>节流的应用场景 :mousemove事件        scroll等事件</p> <p>鼠标连续不断地触发某事件（如点击），只在单位时间内只触发一次事件；</p> <p>懒加载时要监听计算滚动条的位置，但不必每次滑动都触发，可以降低计算的频率，而不必去浪费 CPU 资源</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//让操作以指定间隔执行</span>
<span class="token comment">//通过定时器进行设置</span>
<span class="token comment">//在指定的时间间隔内再次触发操作会被忽略</span>
<span class="token comment">//直到本次操作完毕，才允许执行下一次</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;./angel.gif&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;angel&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">// 我们希望mousemove事件执行间隔变大，至少为100ms，可以使用节流操作</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 默认为true代表可以执行操作</span>

    <span class="token comment">// 1 设置鼠标移动事件</span>
    <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">!==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 设置下次无法触发</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 2 将鼠标的横纵坐标设置给img的left和top即可</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#angel'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          left<span class="token operator">:</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span>
          top<span class="token operator">:</span> e<span class="token punctuation">.</span>pageY
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 本次间隔后操作执行后，允许进行下次操作</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_21-3-节流和防抖的区别："><a href="#_21-3-节流和防抖的区别：" class="header-anchor">#</a> 21.3. 节流和防抖的区别：</h3> <blockquote><p>防抖是当指定间隔时间内再次触发，使用新触发的操作再次重新记时。</p> <p>节流是在指定间隔时间内再次触发，新操作会被忽略。</p></blockquote> <blockquote><p>防抖：如果事件被频繁触发，防抖能保证只有最后一次触发生效！前面 N 多次的触发都会被忽略！</p></blockquote> <blockquote><p>节流：如果事件被频繁触发，节流能够减少事件触发的频率，因此，节流是有选择性地执行一部分事件！</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.549ab972.js" defer></script><script src="/assets/js/2.ecc2fa6f.js" defer></script><script src="/assets/js/9.20648608.js" defer></script>
  </body>
</html>
